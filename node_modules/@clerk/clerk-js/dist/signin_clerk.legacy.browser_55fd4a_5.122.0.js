"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["6722"],{7389:function(e,t,r){r.d(t,{v:()=>a});var n=r(73312),i=r(24562),o=r(64204);let a=e=>{let{onBackLinkClick:t}=e;return(0,n.tZ)(i._,{cardTitle:(0,o.localizationKeys)("signIn.alternativeMethods.getHelp.title"),cardSubtitle:(0,o.localizationKeys)("signIn.alternativeMethods.getHelp.content"),onBackLinkClick:t})}},16241:function(e,t,r){r.r(t),r.d(t,{SignIn:()=>e4,SignInModal:()=>e6});var n=r(73312),i=r(61869),o=r(69144),a=r(15112);r(50725);var l=r(23147),s=r(64204),c=r(5482),d=r(92418),u=r(2672),h=r(92654),p=r(19955),f=r(11576),g=r(24676);let m=(0,o.lazy)(()=>Promise.all([r.e("514"),r.e("3956"),r.e("1192"),r.e("9573"),r.e("569")]).then(r.bind(r,22382)).then(e=>({default:e.Web3SolanaWalletButtons}))),I=(0,l.Jh)((0,l.Hy)((0,u.withCardStateProvider)(()=>{let e=(0,i.cL)(),t=(0,u.useCardState)(),r=(0,g.useRouter)(),a=(0,f.useSignInContext)();return(0,n.tZ)(s.Flow.Part,{part:"chooseWallet",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.web3Solana.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.web3Solana.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:t.error}),(0,n.BX)(s.Flex,{direction:"col",gap:4,children:[(0,n.tZ)(o.Suspense,{fallback:(0,n.tZ)(s.Flex,{direction:"row",align:"center",justify:"center",sx:e=>({height:"100%",minHeight:e.sizes.$32}),children:(0,n.tZ)(s.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:s.descriptors.spinner})}),children:(0,n.tZ)(m,{web3AuthCallback:n=>{let{walletName:i}=n;return e.authenticateWithWeb3({customNavigate:r.navigate,redirectUrl:a.afterSignInUrl||"/",secondFactorUrl:"factor-two",signUpContinueUrl:a.isCombinedFlow?"create/continue":a.signUpContinueUrl,strategy:"web3_solana_signature",walletName:i}).catch(e=>(0,p.H)(e,t.setError))}})}),(0,n.tZ)(c.h,{boxElementDescriptor:s.descriptors.backRow,linkElementDescriptor:s.descriptors.backLink,onClick:()=>{r.navigate("../")}})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})})));var S=r(96352),v=r(4511),y=r(7508),w=r(22073);let C=()=>Promise.all([r.e("1192"),r.e("9573"),r.e("1710")]).then(r.bind(r,73041)),_=(0,o.lazy)(()=>C().then(e=>({default:e.SignUpVerifyPhone}))),Z=(0,o.lazy)(()=>C().then(e=>({default:e.SignUpVerifyEmail}))),b=(0,o.lazy)(()=>C().then(e=>({default:e.SignUpStart}))),k=(0,o.lazy)(()=>C().then(e=>({default:e.SignUpSSOCallback}))),A=(0,o.lazy)(()=>C().then(e=>({default:e.SignUpContinue})));r(45261),r(70957),r(24551),r(22349),r(65223);var F=r(70431),U=r(88870),z=r(86842),P=r(36788),B=r(24152),E=r(93234);let L=(0,u.withCardStateProvider)(()=>{let e=(0,f.useCoreSignIn)(),t=(0,u.useCardState)(),{navigate:r}=(0,g.useRouter)(),i=(0,E.H)(),{userSettings:{passwordSettings:a}}=(0,f.useEnvironment)(),{t:l,locale:c}=(0,s.useLocalizations)(),p="needs_new_password"===e.status&&"reset_password_email_code"!==e.firstFactorVerification.strategy&&"reset_password_phone_code"!==e.firstFactorVerification.strategy;o.useEffect(()=>{p&&t.setError(l((0,s.localizationKeys)("signIn.resetPassword.requiredMessage")))},[]);let m=(0,P.Yp)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,z.GM)(e,{t:l,locale:c,passwordSettings:a})}),I=(0,P.Yp)("confirmPassword","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),v=(0,P.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,s.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:y,isPasswordMatch:w}=(0,S.p5)({passwordField:m,confirmPasswordField:I}),C=async()=>{m.clearFeedback(),I.clearFeedback();try{let{status:t,createdSessionId:n}=await e.resetPassword({password:m.value,signOutOfOtherSessions:v.checked});switch(t){case"complete":if(n){let e=new URLSearchParams;return e.set("createdSessionId",n),r("../reset-password-success?".concat(e.toString()))}return console.error((0,B.Ws)(t,i));case"needs_second_factor":return r("../factor-two");default:return console.error((0,B.Ws)(t,i))}}catch(e){return(0,U.S3)(e,[m,I],t.setError)}};return(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.tZ)(h.h.Root,{showLogo:!0,children:(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.resetPassword.title")})}),(0,n.tZ)(d.Z.Alert,{children:t.error}),(0,n.tZ)(s.Col,{elementDescriptor:s.descriptors.main,gap:8,children:(0,n.BX)(F.l.Root,{onSubmit:C,onBlur:()=>{m.value&&y(I.value)},gap:8,children:[(0,n.BX)(s.Col,{gap:6,children:[(0,n.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.identifier||"",style:{display:"none"}}),(0,n.tZ)(F.l.ControlRow,{elementId:m.id,children:(0,n.tZ)(F.l.PasswordInput,{...m.props,isRequired:!0,autoFocus:!0})}),(0,n.tZ)(F.l.ControlRow,{elementId:I.id,children:(0,n.tZ)(F.l.PasswordInput,{...I.props,onChange:e=>(e.target.value&&y(e.target.value),I.props.onChange(e))})}),!p&&(0,n.tZ)(F.l.ControlRow,{elementId:v.id,children:(0,n.tZ)(F.l.Checkbox,{...v.props})})]}),(0,n.BX)(s.Col,{gap:3,children:[(0,n.tZ)(F.l.SubmitButton,{isDisabled:!w,localizationKey:(0,s.localizationKeys)("signIn.resetPassword.formButtonPrimary")}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:(0,n.tZ)(d.Z.ActionLink,{elementDescriptor:s.descriptors.backLink,localizationKey:(0,s.localizationKeys)("backButton"),onClick:()=>r("../")})})]})]})})]}),(0,n.tZ)(d.Z.Footer,{})]})});var K=r(44875),R=r(30215);let T=(0,u.withCardStateProvider)(()=>{let e=(0,u.useCardState)();return(0,K.E)(),(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.tZ)(h.h.Root,{showLogo:!0,children:(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.resetPassword.title")})}),(0,n.tZ)(d.Z.Alert,{children:e.error}),(0,n.BX)(s.Col,{elementDescriptor:s.descriptors.main,gap:8,children:[(0,n.tZ)(s.Text,{localizationKey:(0,s.localizationKeys)("signIn.resetPassword.successMessage")}),(0,n.tZ)(R.kC,{direction:"row",center:!0,children:(0,n.tZ)(s.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:s.descriptors.spinner})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})});var M=r(42305),O=r(48774),x=r(97295),D=r(96231),N=r(96519),X=r(49327),W=r(35241);let V=(0,D.Hy)((0,u.withCardStateProvider)(()=>{let e=(0,u.useCardState)(),{userProfileUrl:t}=(0,f.useEnvironment)().displayConfig,{afterSignInUrl:r,path:i,signInUrl:o,taskUrl:a}=(0,f.useSignInContext)(),{navigateAfterSignOut:l}=(0,f.useSignOutContext)(),{handleSignOutAllClicked:c,handleSessionClicked:p,signedInSessions:g,handleAddAccountClicked:m}=(0,W.Z)({taskUrl:a,navigateAfterSignOut:l,afterSwitchSessionUrl:r,userProfileUrl:t,signInUrl:null!=i?i:o,user:void 0});return(0,n.tZ)(s.Flow.Part,{part:"accountSwitcher",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{sx:e=>({padding:"".concat(e.space.$8," ").concat(e.space.$none," ").concat(e.space.$none)}),children:[(0,n.BX)(h.h.Root,{children:[(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.accountSwitcher.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.accountSwitcher.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:e.error}),(0,n.tZ)(s.Col,{elementDescriptor:s.descriptors.main,gap:8,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100}),children:(0,n.BX)(M.eX,{role:"menu",children:[g.map(e=>(0,n.tZ)(O.K,{onClick:p(e),sx:e=>({height:e.sizes.$16,justifyContent:"flex-start",borderRadius:0}),icon:N.nR,children:(0,n.tZ)(x.E,{user:e.user,sx:{width:"100%"}})},e.id)),(0,n.tZ)(M.aU,{elementDescriptor:s.descriptors.accountSwitcherActionButton,elementId:s.descriptors.accountSwitcherActionButton.setId("addAccount"),iconBoxElementDescriptor:s.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:s.descriptors.accountSwitcherActionButtonIconBox.setId("addAccount"),iconElementDescriptor:s.descriptors.accountSwitcherActionButtonIcon,iconElementId:s.descriptors.accountSwitcherActionButtonIcon.setId("addAccount"),icon:N.mm,label:(0,s.localizationKeys)("signIn.accountSwitcher.action__addAccount"),onClick:m,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})})]}),(0,n.tZ)(d.Z.Footer,{sx:e=>({">:first-of-type":{padding:"".concat(e.space.$1),width:"100%"}}),children:(0,n.tZ)(d.Z.Action,{sx:{width:"100%",">:first-of-type":{width:"100%",borderBottomWidth:0}},children:(0,n.tZ)(X.gW,{handleSignOutAllClicked:c,elementDescriptor:s.descriptors.accountSwitcherActionButton,elementId:s.descriptors.accountSwitcherActionButton.setId("signOutAll"),iconBoxElementDescriptor:s.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:s.descriptors.accountSwitcherActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:s.descriptors.accountSwitcherActionButtonIcon,iconElementId:s.descriptors.accountSwitcherActionButtonIcon.setId("signOutAll"),label:(0,s.localizationKeys)("signIn.accountSwitcher.action__signOutAll"),actionSx:e=>({padding:"".concat(e.space.$2," ").concat(e.space.$2)})})})})]})})}));var H=r(24562),$=r(21455),G=r(91752),j=r(17703);r(92037);var Y=r(38246),q=r(16735),J=r(44271),Q=r(41024),ee=r(80753),et=r(96565),er=r(56749),en=r(75747),ei=r(874);let eo=o.memo(e=>{let t=(0,i.cL)(),{navigate:r}=(0,g.useRouter)(),o=(0,u.useCardState)(),{displayConfig:a}=(0,en.O)(),l=(0,f.useSignInContext)(),s=(0,f.useCoreSignIn)(),c=(0,er.wT)(l,a.signInUrl),d=l.afterSignInUrl||"/",h="popup"===l.oauthFlow||"auto"===l.oauthFlow&&(0,et.t)(),{onAlternativePhoneCodeProviderClick:m,...I}=e,S=e=>(0,Q.kD)(e)&&e.errors.find(e=>e.code===ee.O1.SESSION_EXISTS)?t.setActive({session:t.client.lastActiveSessionId,navigate:async e=>{let{session:t}=e;await l.navigateOnSetActive({session:t,redirectUrl:l.afterSignInUrl})}}):(0,U.S3)(e,[],o.setError);return(0,n.tZ)(ei.L,{...I,showLastAuthenticationStrategy:!0,idleAfterDelay:!h,oauthCallback:e=>{if(h){let t=window.open("about:blank","","width=600,height=800"),r=setInterval(()=>{(!t||t.closed)&&(clearInterval(r),o.setIdle())},500);return s.authenticateWithPopup({strategy:e,redirectUrl:c,redirectUrlComplete:d,popup:t,oidcPrompt:l.oidcPrompt}).catch(e=>S(e))}return s.authenticateWithRedirect({strategy:e,redirectUrl:c,redirectUrlComplete:d,oidcPrompt:l.oidcPrompt}).catch(e=>S(e))},web3Callback:e=>"web3_solana_signature"===e?r("choose-wallet?strategy=".concat(e)):t.authenticateWithWeb3({customNavigate:r,redirectUrl:d,signUpContinueUrl:l.isCombinedFlow?"create/continue":l.signUpContinueUrl,strategy:e,secondFactorUrl:"factor-two"}).catch(e=>(0,p.H)(e,o.setError)),alternativePhoneCodeCallback:e=>{null==m||m(e)}})});var ea=r(95518);function el(){var e;return null==(e=(0,f.useCoreSignIn)().supportedFirstFactors)?void 0:e.find(e=>{let{strategy:t}=e;return(0,ea.Vh)(t)})}var es=r(7389);let ec=e=>((e,t)=>{let[r,i]=o.useState(!1),a=o.useCallback(()=>i(e=>!e),[i]);return r?(0,n.tZ)(es.v,{onBackLinkClick:a}):(0,n.tZ)(e,{...t,onHavingTroubleClick:a})})(ed,{...e}),ed=e=>{let{onBackLinkClick:t,onHavingTroubleClick:r,onFactorSelected:i,mode:o="default"}=e,a=(0,u.useCardState)(),l=el(),{supportedFirstFactors:p}=(0,f.useCoreSignIn)(),{firstPartyFactors:g,hasAnyStrategy:m}=(0,G.l)({filterOutFactor:null==e?void 0:e.currentFactor,supportedFirstFactors:p}),I=function(e){switch(e){case"forgot":return"forgotPasswordMethods";case"pwned":return"passwordPwnedMethods";case"passwordCompromised":return"passwordCompromisedMethods";default:return"alternativeMethods"}}(o),S=function(e){switch(e){case"forgot":return(0,s.localizationKeys)("signIn.forgotPasswordAlternativeMethods.title");case"pwned":return(0,s.localizationKeys)("signIn.passwordPwned.title");case"passwordCompromised":return(0,s.localizationKeys)("signIn.passwordCompromised.title");default:return(0,s.localizationKeys)("signIn.alternativeMethods.title")}}(o),v=function(e){switch(e){case"forgot":case"pwned":return!0;default:return!1}}(o);return(0,n.tZ)(s.Flow.Part,{part:I,children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:S}),!v&&"passwordCompromised"!==o&&(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:a.error}),(0,n.BX)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:6,children:[v&&l&&(0,n.tZ)(s.Button,{localizationKey:eu(l),elementDescriptor:s.descriptors.alternativeMethodsBlockButton,isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),i(l)}}),v&&m&&(0,n.tZ)(q.i,{dividerText:(0,s.localizationKeys)("signIn.forgotPasswordAlternativeMethods.label__alternativeMethods")}),(0,n.BX)(s.Col,{gap:4,children:[m&&(0,n.BX)(s.Flex,{elementDescriptor:s.descriptors.alternativeMethods,direction:"col",gap:2,children:[(0,n.tZ)(eo,{enableWeb3Providers:!0,enableOAuthProviders:!0,enableAlternativePhoneCodeProviders:!1}),g&&g.map((e,t)=>{var r;return(0,n.tZ)(Y.$,{leftIcon:(r=e,({email_link:N.xP,email_code:N.GT,phone_code:N.iU,reset_password_email_code:N.ds,reset_password_phone_code:N.ds,password:N.kh,passkey:N.IG})[r.strategy]),textLocalizationKey:eu(e),elementDescriptor:s.descriptors.alternativeMethodsBlockButton,textElementDescriptor:s.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:s.descriptors.alternativeMethodsBlockButtonArrow,textVariant:"buttonLarge",isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),i(e)}},t)})]}),t&&(0,n.tZ)(c.h,{boxElementDescriptor:s.descriptors.backRow,linkElementDescriptor:s.descriptors.backLink,onClick:t})]})]})]}),(0,n.tZ)(d.Z.Footer,{children:(0,n.BX)(d.Z.Action,{elementId:"havingTrouble",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:r})]})})]})})};function eu(e){switch(e.strategy){case"email_link":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,J.H)(e.safeIdentifier)||""});case"email_code":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"phone_code":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"password":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__password");case"passkey":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__passkey");case"reset_password_email_code":case"reset_password_phone_code":return(0,s.localizationKeys)("signIn.forgotPasswordAlternativeMethods.blockButton__resetPassword");default:throw Error('Invalid sign in strategy: "'.concat(e.strategy,'"'))}}var eh=r(93367);function ep(e){let t=(0,u.useCardState)(),{setActive:r,__internal_navigateWithError:n}=(0,i.cL)(),a=(0,E.H)(),{afterSignInUrl:l,navigateOnSetActive:s}=(0,f.useSignInContext)(),{authenticateWithPasskey:c}=(0,f.useCoreSignIn)();return(0,o.useEffect)(()=>()=>{eh.YI.abort()},[]),(0,o.useCallback)(async function(){for(var i=arguments.length,o=Array(i),d=0;d<i;d++)o[d]=arguments[d];try{let t=await c(...o);switch(t.status){case"complete":return r({session:t.createdSessionId,navigate:async e=>{let{session:t}=e;await s({session:t,redirectUrl:l})}});case"needs_second_factor":return e();default:return console.error((0,B.Ws)(t.status,a))}}catch(r){let{flow:e}=o[0]||{};if((0,Q.uX)(r)&&("passkey_operation_aborted"===r.code||"autofill"===e&&"passkey_retrieval_cancelled"===r.code))return;if((0,Q.ay)(r))return n("..",r.errors[0]);(0,U.S3)(r,[],t.setError)}},[])}function ef(e){return!!(null==e?void 0:e.length)&&e.filter(e=>"enterprise_sso"===e.strategy&&"enterpriseConnectionId"in e&&"enterpriseConnectionName"in e).length>1}var eg=r(90159),em=r(23465);let eI=e=>{let t=(0,f.useCoreSignIn)(),r=(0,u.useCardState)(),{navigate:o}=(0,g.useRouter)(),{afterSignInUrl:a,navigateOnSetActive:l}=(0,f.useSignInContext)(),{setActive:s}=(0,i.cL)(),c=(0,E.H)(),d=(0,i.cL)(),h=e.factor.channel,p="verified"===t.firstFactorVerification.status&&e.factorAlreadyPrepared;return(0,n.tZ)(em.U,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,n,i)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then(async e=>{switch(await n(),e.status){case"complete":return s({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await l({session:t,redirectUrl:a})}});case"needs_second_factor":return o("../factor-two");case"needs_new_password":return o("../reset-password");default:return console.error((0,B.Ws)(e.status,c))}}).catch(e=>(0,Q.ay)(e)?d.__internal_navigateWithError("..",e.errors[0]):i(e))},onResendCodeClicked:()=>{p||t.prepareFirstFactor({...e.factor,channel:h}).then(()=>e.onFactorPrepare()).catch(e=>(0,U.S3)(e,[],r.setError))},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,alternativeMethodsLabel:(0,j.u1)("footerActionLink__alternativePhoneCodeProvider"),onShowAlternativeMethodsClicked:()=>{r.setError(void 0),e.onChangePhoneCodeChannel({...e.factor,channel:void 0})},showAlternativeMethods:!0,onIdentityPreviewEditClicked:()=>o("../"),onBackLinkClicked:e.onBackLinkClicked})},eS=e=>{var t;return(0,n.tZ)(s.Flow.Part,{part:"phoneCode",children:(0,n.tZ)(eI,{...e,cardTitle:(0,s.localizationKeys)("signIn.alternativePhoneCodeProvider.title",{provider:(null==(t=(0,eg.H)(e.factor.channel))?void 0:t.name)||""}),cardSubtitle:(0,s.localizationKeys)("signIn.alternativePhoneCodeProvider.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.alternativePhoneCodeProvider.formTitle"),resendButton:(0,s.localizationKeys)("signIn.alternativePhoneCodeProvider.resendButton")})})},ev=e=>{let t=(0,f.useCoreSignIn)(),r=(0,u.useCardState)(),{navigate:a}=(0,g.useRouter)(),{afterSignInUrl:l,navigateOnSetActive:s}=(0,f.useSignInContext)(),{setActive:c}=(0,i.cL)(),d=(0,E.H)(),h=(0,i.cL)(),p="verified"===t.firstFactorVerification.status&&e.factorAlreadyPrepared,m=(0,o.useMemo)(()=>{let t=e.factor,r=t.strategy;return"emailAddressId"in t&&(r+="_".concat(t.emailAddressId)),"phoneNumberId"in t&&(r+="_".concat(t.phoneNumberId)),"channel"in t&&t.channel&&(r+="_".concat(t.channel)),{name:"signIn.prepareFirstFactor",factorKey:r}},[e.factor.strategy,"emailAddressId"in e.factor?e.factor.emailAddressId:void 0,"phoneNumberId"in e.factor?e.factor.phoneNumberId:void 0,"channel"in e.factor?e.factor.channel:void 0]);return(0,S.ib)(p?void 0:()=>null==t?void 0:t.prepareFirstFactor(e.factor),m,{staleTime:100,onSuccess:()=>e.onFactorPrepare(),onError:e=>(0,U.S3)(e,[],r.setError)}),(0,n.tZ)(em.U,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,n,i)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then(async e=>{switch(await n(),e.status){case"complete":return c({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await s({session:t,redirectUrl:l})}});case"needs_second_factor":return a("../factor-two");case"needs_new_password":return a("../reset-password");default:return console.error((0,B.Ws)(e.status,d))}}).catch(e=>(0,Q.ay)(e)?h.__internal_navigateWithError("..",e.errors[0]):i(e))},onResendCodeClicked:()=>{p||t.prepareFirstFactor(e.factor).then(()=>e.onFactorPrepare()).catch(e=>(0,U.S3)(e,[],r.setError))},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,showAlternativeMethods:e.showAlternativeMethods,onIdentityPreviewEditClicked:()=>a("../"),onBackLinkClicked:e.onBackLinkClicked})},ey=e=>(0,n.tZ)(s.Flow.Part,{part:"emailCode",children:(0,n.tZ)(ev,{...e,cardTitle:(0,s.localizationKeys)("signIn.emailCode.title"),cardSubtitle:(0,s.localizationKeys)("signIn.emailCode.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.emailCode.formTitle"),resendButton:(0,s.localizationKeys)("signIn.emailCode.resendButton")})});var ew=r(65495),eC=r(14814),e_=r(85117);let eZ=e=>{let{t}=(0,s.useLocalizations)(),r=(0,u.useCardState)(),a=(0,f.useCoreSignIn)(),l=(0,f.useSignInContext)(),{signInUrl:c}=l,{navigate:d}=(0,e_.t)(),{afterSignInUrl:h}=(0,f.useSignInContext)(),{setActive:p}=(0,i.cL)(),{startEmailLinkFlow:g,cancelEmailLinkFlow:m}=(0,eC.E)(a),[I,S]=o.useState(!1),v=(0,i.cL)();o.useEffect(()=>{y()},[]);let y=()=>{g({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,er.Uu)({ctx:l,baseUrl:c,intent:"sign-in"})}).then(e=>w(e)).catch(e=>{if((0,Q.ay)(e))return v.__internal_navigateWithError("..",e.errors[0]);(0,U.S3)(e,[],r.setError)})},w=async e=>{let n=e.firstFactorVerification;"expired"===n.status?r.setError(t((0,s.localizationKeys)("formFieldError__verificationLinkExpired"))):n.verifiedFromTheSameClient()?S(!0):await C(e)},C=async e=>"complete"===e.status?p({session:e.createdSessionId,redirectUrl:h}):"needs_second_factor"===e.status?d("../factor-two"):void 0;return I?(0,n.tZ)(D.Ej,{title:(0,s.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,s.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,n.tZ)(s.Flow.Part,{part:"emailLink",children:(0,n.tZ)(ew.J,{cardTitle:(0,s.localizationKeys)("signIn.emailLink.title"),cardSubtitle:(0,s.localizationKeys)("signIn.emailLink.subtitle"),formTitle:(0,s.localizationKeys)("signIn.emailLink.formTitle"),formSubtitle:(0,s.localizationKeys)("signIn.emailLink.formSubtitle"),resendButton:(0,s.localizationKeys)("signIn.emailLink.resendButton"),onResendCodeClicked:()=>{m(),y()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})};var eb=r(71989);let ek=(0,u.withCardStateProvider)((e=>{let t=e.displayName||e.name||"Component";e.displayName=t;let r=t=>{let r=(0,f.useCoreSignIn)(),n=(0,f.useSignInContext)();return(0,D.me)(e,()=>!ef(r.supportedFirstFactors),e=>{let{clerk:t}=e;return n.signInUrl||t.buildSignInUrl()},"There are no enterprise connections available to sign-in. Clerk is redirecting to the `signInUrl` instead.")(t)};return r.displayName="withEnterpriseConnectionsGuard(".concat(t,")"),r})(()=>{let e=(0,f.useSignInContext)(),{displayConfig:t}=(0,f.useEnvironment)(),r=(0,i.cL)().client.signIn;if(!ef(r.supportedFirstFactors))return null;let o=r.supportedFirstFactors.map(e=>({id:e.enterpriseConnectionId,name:e.enterpriseConnectionName}));return(0,n.tZ)(s.Flow.Part,{part:"enterpriseConnections",children:(0,n.tZ)(eb.c,{title:(0,s.localizationKeys)("signIn.enterpriseConnections.title"),subtitle:(0,s.localizationKeys)("signIn.enterpriseConnections.subtitle"),onClick:n=>{let i=(0,D.wT)(e,t.signInUrl),o=e.afterSignInUrl||"/";return r.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:i,redirectUrlComplete:o,oidcPrompt:e.oidcPrompt,continueSignIn:!0,enterpriseConnectionId:n})},enterpriseConnections:o})})})),eA=e=>(0,n.tZ)(s.Flow.Part,{part:"resetPassword",children:(0,n.tZ)(ev,{...e,showAlternativeMethods:!1,cardTitle:(0,s.localizationKeys)("signIn.forgotPassword.title"),inputLabel:(0,s.localizationKeys)("signIn.forgotPassword.formTitle"),resendButton:(0,s.localizationKeys)("signIn.forgotPassword.resendButton")})});var eF=r(384);let eU=e=>{let{onShowAlternativeMethodsClick:t}=e,r=(0,u.useCardState)(),i=(0,f.useCoreSignIn)(),{navigate:a}=(0,e_.t)(),[l,c]=o.useState(!1),p=o.useCallback(()=>c(e=>!e),[c]),g=ep(()=>a("../factor-two"));return l?(0,n.tZ)(es.v,{onBackLinkClick:p}):(0,n.tZ)(s.Flow.Part,{part:"password",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(s.Icon,{elementDescriptor:s.descriptors.passkeyIcon,icon:N.IG,sx:e=>({color:e.colors.$neutralAlpha500,marginInline:"auto",paddingBottom:e.sizes.$1,width:e.sizes.$12,height:e.sizes.$12})}),(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.passkey.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.passkey.subtitle")}),(0,n.tZ)(eF.m,{identifier:i.identifier,avatarUrl:i.userData.imageUrl,onClick:()=>a("../")})]}),(0,n.tZ)(d.Z.Alert,{children:r.error}),(0,n.BX)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:4,children:[(0,n.tZ)(F.l.Root,{onSubmit:e=>(e.preventDefault(),g()),gap:8,children:(0,n.tZ)(F.l.SubmitButton,{hasArrow:!0})}),(0,n.tZ)(d.Z.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)(t?"footerActionLink__useAnotherMethod":"signIn.alternativeMethods.actionLink"),onClick:t||p})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})},ez=e=>{let{onShowAlternativeMethodsClick:t,onPasswordError:r}=e,a=o.useRef(null),l=(0,u.useCardState)(),{setActive:c}=(0,i.cL)(),p=(0,f.useCoreSignIn)(),{afterSignInUrl:g,navigateOnSetActive:m}=(0,f.useSignInContext)(),I=(0,E.H)(),S=(e=>{let{onForgotPasswordMethodClick:t,onShowAlternativeMethodsClick:r}=e,n=el(),i=(0,P.Yp)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password")});return{...i,props:{...i.props,actionLabel:n||r?(0,s.localizationKeys)("formFieldAction__forgotPassword"):"",onActionClicked:t||r||(()=>null)}}})(e),{navigate:v}=(0,e_.t)(),[y,w]=o.useState(!1),C=o.useCallback(()=>w(e=>!e),[w]),_=(0,i.cL)();return y?(0,n.tZ)(es.v,{onBackLinkClick:C}):(0,n.tZ)(s.Flow.Part,{part:"password",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.password.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.password.subtitle")}),(0,n.tZ)(eF.m,{identifier:p.identifier,avatarUrl:p.userData.imageUrl,onClick:()=>{v("../")}})]}),(0,n.tZ)(d.Z.Alert,{children:l.error}),(0,n.BX)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:4,children:[(0,n.BX)(F.l.Root,{onSubmit:e=>{e.preventDefault(),p.attemptFirstFactor({strategy:"password",password:S.value}).then(e=>{switch(e.status){case"complete":return c({session:e.createdSessionId,navigate:e=>{let{session:t}=e;return m({session:t,redirectUrl:g})}});case"needs_second_factor":return v("../factor-two");default:return console.error((0,B.Ws)(e.status,I))}}).catch(e=>{if((0,Q.ay)(e))return _.__internal_navigateWithError("..",e.errors[0]);if(r){if((0,Q.UZ)(e)){l.setError({...e.errors[0],code:"form_password_pwned__sign_in"}),r("pwned");return}if((0,Q.Lx)(e)){l.setError({...e.errors[0],code:"form_password_compromised__sign_in"}),r("compromised");return}}(0,U.S3)(e,[S],l.setError),setTimeout(()=>{var e;return null==(e=a.current)?void 0:e.focus()},0)})},gap:8,children:[(0,n.tZ)("input",{readOnly:!0,id:"identifier-field",name:"identifier",value:p.identifier||"",style:{display:"none"}}),(0,n.tZ)(F.l.ControlRow,{elementId:S.id,children:(0,n.tZ)(F.l.PasswordInput,{...S.props,ref:a,autoFocus:!0})}),(0,n.tZ)(F.l.SubmitButton,{hasArrow:!0})]}),(0,n.tZ)(d.Z.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)(t?"signIn.password.actionLink":"signIn.alternativeMethods.actionLink"),onClick:t||C})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})},eP=e=>(0,n.tZ)(s.Flow.Part,{part:"phoneCode",children:(0,n.tZ)(ev,{...e,cardTitle:(0,s.localizationKeys)("signIn.phoneCode.title"),cardSubtitle:(0,s.localizationKeys)("signIn.phoneCode.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.phoneCode.formTitle"),resendButton:(0,s.localizationKeys)("signIn.phoneCode.resendButton")})}),eB=e=>{if(!e)return"";let t=e.strategy;return"emailAddressId"in e&&(t+=e.emailAddressId),"phoneNumberId"in e&&(t+=e.phoneNumberId),"channel"in e&&(t+=e.channel),t},eE=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){let{__internal_setActiveInProgress:e}=(0,i.cL)(),t=(0,f.useCoreSignIn)(),{preferredSignInStrategy:r}=(0,f.useEnvironment)().displayConfig,a=t.supportedFirstFactors,l=(0,g.useRouter)(),s=(0,u.useCardState)(),{supportedFirstFactors:c,firstFactorVerification:d}=(0,f.useCoreSignIn)(),h=o.useRef(""),[{currentFactor:p},m]=o.useState(()=>{let e=(0,ea.t3)(a,t.identifier,r);return(null==e?void 0:e.strategy)==="phone_code"&&d.channel&&"sms"!==d.channel&&(e.channel=d.channel),{currentFactor:e,prevCurrentFactor:void 0}}),{hasAnyStrategy:I}=(0,G.l)({filterOutFactor:p,supportedFirstFactors:c}),[S,v]=o.useState(()=>!p||!(0,ea.xT)(p)),y=el(),[w,C]=o.useState(!1),[_,Z]=o.useState(null);if(o.useEffect(()=>{e||("needs_identifier"===t.status||null===t.status)&&l.navigate("../")},[e]),!p)return t.status?(0,n.tZ)(H._,{cardTitle:(0,j.u1)("signIn.noAvailableMethods.title"),cardSubtitle:(0,j.u1)("signIn.noAvailableMethods.subtitle"),message:(0,j.u1)("signIn.noAvailableMethods.message")}):(0,n.tZ)($.W,{});let b=I?()=>v(e=>!e):void 0,k=()=>C(e=>!e),A=()=>{h.current=eB(p)},F=e=>{m(t=>({currentFactor:e,prevCurrentFactor:t.currentFactor}))};if(ef(t.supportedFirstFactors))return(0,n.tZ)(ek,{});if(S||w){let e=(0,ea.xT)(p),t=S?b:k;return(0,n.tZ)(ec,{mode:w?"pwned"===_?"pwned":"compromised"===_?"passwordCompromised":"forgot":"default",onBackLinkClick:e?()=>{s.setError(void 0),Z(null),null==t||t()}:void 0,onFactorSelected:e=>{F(e),null==t||t()},currentFactor:p})}if(!p)return(0,n.tZ)($.W,{});switch(null==p?void 0:p.strategy){case"passkey":return(0,n.tZ)(eU,{onFactorPrepare:A,onShowAlternativeMethodsClick:b});case"password":return(0,n.tZ)(ez,{onForgotPasswordMethodClick:y?k:b,onShowAlternativeMethodsClick:b,onPasswordError:e=>{Z(e),k()}});case"email_code":return(0,n.tZ)(ey,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onShowAlternativeMethodsClicked:b});case"phone_code":if(p.channel&&"sms"!==p.channel)return(0,n.tZ)(eS,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onChangePhoneCodeChannel:F});return(0,n.tZ)(eP,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onShowAlternativeMethodsClicked:b});case"email_link":return(0,n.tZ)(eZ,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onShowAlternativeMethodsClicked:b});case"reset_password_phone_code":return(0,n.tZ)(eA,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onShowAlternativeMethodsClicked:b,onBackLinkClicked:()=>{m(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),k()},cardSubtitle:(0,j.u1)("signIn.forgotPassword.subtitle_phone")});case"reset_password_email_code":return(0,n.tZ)(eA,{factorAlreadyPrepared:h.current===eB(p),onFactorPrepare:A,factor:p,onShowAlternativeMethodsClicked:b,onBackLinkClicked:()=>{m(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),k()},cardSubtitle:(0,j.u1)("signIn.forgotPassword.subtitle_email")});default:return(0,n.tZ)($.W,{})}})));var eL=r(90577);let eK=e=>{let[t,r]=o.useState(!1),i=o.useCallback(()=>r(e=>!e),[r]);return t?(0,n.tZ)(es.v,{onBackLinkClick:i}):(0,n.tZ)(eR,{onBackLinkClick:e.onBackLinkClick,onFactorSelected:e.onFactorSelected,onHavingTroubleClick:i})},eR=e=>{let{onHavingTroubleClick:t,onFactorSelected:r,onBackLinkClick:i}=e,o=(0,u.useCardState)(),{supportedSecondFactors:a}=(0,f.useCoreSignIn)();return(0,n.tZ)(s.Flow.Part,{part:"alternativeMethods",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:o.error}),(0,n.BX)(s.Col,{elementDescriptor:s.descriptors.main,gap:3,children:[(0,n.tZ)(s.Col,{gap:2,children:a&&a.sort(eL.Q0).map((e,t)=>(0,n.tZ)(Y.$,{textLocalizationKey:function(e){switch(e.strategy){case"phone_code":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"totp":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__totp");case"backup_code":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__backupCode");case"email_code":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"email_link":return(0,s.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,J.H)(e.safeIdentifier)||""});default:throw Error('Invalid sign in strategy: "'.concat(e.strategy,'"'))}}(e),elementDescriptor:s.descriptors.alternativeMethodsBlockButton,textElementDescriptor:s.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:s.descriptors.alternativeMethodsBlockButtonArrow,isDisabled:o.isLoading,onClick:()=>r(e)},t))}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:i&&(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("backButton"),onClick:e.onBackLinkClick})})]})]}),(0,n.tZ)(d.Z.Footer,{children:(0,n.BX)(d.Z.Action,{elementId:"havingTrouble",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:t})]})})]})})},eT=e=>{let{onShowAlternativeMethodsClicked:t}=e,r=(0,f.useCoreSignIn)(),{afterSignInUrl:o,navigateOnSetActive:a}=(0,f.useSignInContext)(),{setActive:l}=(0,i.cL)(),{navigate:c}=(0,g.useRouter)(),p=(0,E.H)(),m=(0,u.useCardState)(),I=(0,P.Yp)("code","",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__backupCode"),isRequired:!0}),S=(0,i.cL)(),v=e=>{var t,r;return(0,ea.Vh)(null==(t=e.firstFactorVerification)?void 0:t.strategy)&&(null==(r=e.firstFactorVerification)?void 0:r.status)==="verified"};return(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.backupCodeMfa.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:v(r)?(0,s.localizationKeys)("signIn.forgotPassword.subtitle"):(0,s.localizationKeys)("signIn.backupCodeMfa.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:m.error}),(0,n.tZ)(s.Col,{elementDescriptor:s.descriptors.main,gap:8,children:(0,n.BX)(F.l.Root,{onSubmit:e=>(e.preventDefault(),r.attemptSecondFactor({strategy:"backup_code",code:I.value}).then(e=>{if("complete"!==e.status)return console.error((0,B.Ws)(e.status,p));if(v(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),c("../reset-password-success?".concat(t.toString()))}return l({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await a({session:t,redirectUrl:o})}})}).catch(e=>{if((0,Q.ay)(e))return S.__internal_navigateWithError("..",e.errors[0]);(0,U.S3)(e,[I],m.setError)})),children:[(0,n.tZ)(F.l.ControlRow,{elementId:I.id,children:(0,n.tZ)(F.l.PlainInput,{...I.props,autoFocus:!0,onActionClicked:t})}),(0,n.BX)(s.Col,{gap:3,children:[(0,n.tZ)(F.l.SubmitButton,{hasArrow:!0}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:t&&(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("footerActionLink__useAnotherMethod"),onClick:t})})]})]})})]}),(0,n.tZ)(d.Z.Footer,{})]})},eM=e=>{var t,r;return(0,ea.Vh)(null==(t=e.firstFactorVerification)?void 0:t.strategy)&&(null==(r=e.firstFactorVerification)?void 0:r.status)==="verified"},eO=e=>{let t=(0,f.useEnvironment)(),r=(0,f.useCoreSignIn)(),a=(0,u.useCardState)(),{afterSignInUrl:l,navigateOnSetActive:c}=(0,f.useSignInContext)(),{setActive:d}=(0,i.cL)(),{navigate:h}=(0,g.useRouter)(),p=(0,E.H)(),m=(0,i.cL)(),I=(0,o.useMemo)(()=>{let e=Object.values(t.userSettings.attributes).some(e=>e.used_for_second_factor);return"new"===r.clientTrustState&&!e},[r.clientTrustState,t.userSettings.attributes]);o.useEffect(()=>{e.factorAlreadyPrepared||null==S||S()},[]);let S=e.prepare?()=>{var t;return null==(t=e.prepare)?void 0:t.call(e).then(()=>e.onFactorPrepare()).catch(e=>{if((0,Q.ay)(e))return m.__internal_navigateWithError("..",e.errors[0]);(0,U.S3)(e,[],a.setError)})}:void 0;return(0,n.tZ)(em.U,{cardTitle:e.cardTitle,cardSubtitle:eM(r)?(0,s.localizationKeys)("signIn.forgotPassword.subtitle"):e.cardSubtitle,cardNotice:I?(0,s.localizationKeys)("signIn.newDeviceVerificationNotice"):void 0,resendButton:e.resendButton,inputLabel:e.inputLabel,onCodeEntryFinishedAction:(t,n,i)=>{r.attemptSecondFactor({strategy:e.factor.strategy,code:t}).then(async e=>{if(await n(),"complete"!==e.status)return console.error((0,B.Ws)(e.status,p));if(eM(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),h("../reset-password-success?".concat(t.toString()))}return d({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await c({session:t,redirectUrl:l})}})}).catch(e=>(0,Q.ay)(e)?m.__internal_navigateWithError("..",e.errors[0]):i(e))},onResendCodeClicked:S,safeIdentifier:"safeIdentifier"in e.factor?e.factor.safeIdentifier:void 0,profileImageUrl:r.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,children:eM(r)&&(0,n.tZ)(s.Text,{localizationKey:(0,s.localizationKeys)("signIn.resetPasswordMfa.detailsLabel"),colorScheme:"secondary"})})},ex=e=>{let t=(0,f.useCoreSignIn)();return(0,n.tZ)(s.Flow.Part,{part:"emailCode2Fa",children:(0,n.tZ)(eO,{...e,cardTitle:(0,s.localizationKeys)("signIn.emailCodeMfa.title"),cardSubtitle:(0,s.localizationKeys)("signIn.emailCodeMfa.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.emailCodeMfa.formTitle"),resendButton:(0,s.localizationKeys)("signIn.emailCodeMfa.resendButton"),prepare:()=>{let{emailAddressId:r,strategy:n}=e.factor;return t.prepareSecondFactor({emailAddressId:r,strategy:n})}})})},eD=e=>{let{t}=(0,s.useLocalizations)(),r=(0,u.useCardState)(),a=(0,f.useCoreSignIn)(),l=(0,f.useSignInContext)(),{signInUrl:c}=l,{afterSignInUrl:d}=(0,f.useSignInContext)(),{setActive:h}=(0,i.cL)(),{startEmailLinkFlow:p,cancelEmailLinkFlow:g}=(0,eC.E)(a),[m,I]=o.useState(!1),S=(0,i.cL)();o.useEffect(()=>{v()},[]);let v=()=>{p({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,er.Uu)({ctx:l,baseUrl:c,intent:"sign-in"})}).then(e=>y(e)).catch(e=>{if((0,Q.ay)(e))return S.__internal_navigateWithError("..",e.errors[0]);(0,U.S3)(e,[],r.setError)})},y=async e=>{let n=e.secondFactorVerification;"expired"===n.status?r.setError(t((0,s.localizationKeys)("formFieldError__verificationLinkExpired"))):n.verifiedFromTheSameClient()?I(!0):await h({session:e.createdSessionId,redirectUrl:d})};return m?(0,n.tZ)(D.Ej,{title:(0,s.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,s.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,n.tZ)(s.Flow.Part,{part:"emailLink",children:(0,n.tZ)(ew.J,{cardTitle:(0,s.localizationKeys)("signIn.emailLinkMfa.title"),cardSubtitle:(0,s.localizationKeys)("signIn.emailLinkMfa.subtitle"),cardNotice:"new"===a.clientTrustState?(0,s.localizationKeys)("signIn.newDeviceVerificationNotice"):void 0,formSubtitle:(0,s.localizationKeys)("signIn.emailLinkMfa.formSubtitle"),resendButton:(0,s.localizationKeys)("signIn.emailLinkMfa.resendButton"),onResendCodeClicked:()=>{g(),v()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})},eN=e=>{let t=(0,f.useCoreSignIn)();return(0,n.tZ)(s.Flow.Part,{part:"phoneCode2Fa",children:(0,n.tZ)(eO,{...e,cardTitle:(0,s.localizationKeys)("signIn.phoneCodeMfa.title"),cardSubtitle:(0,s.localizationKeys)("signIn.phoneCodeMfa.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.phoneCodeMfa.formTitle"),resendButton:(0,s.localizationKeys)("signIn.phoneCodeMfa.resendButton"),prepare:()=>{let{phoneNumberId:r,strategy:n}=e.factor;return t.prepareSecondFactor({phoneNumberId:r,strategy:n})}})})},eX=e=>(0,n.tZ)(s.Flow.Part,{part:"totp2Fa",children:(0,n.tZ)(eO,{...e,cardTitle:(0,s.localizationKeys)("signIn.totpMfa.title"),cardSubtitle:(0,s.localizationKeys)("signIn.totpMfa.subtitle"),inputLabel:(0,s.localizationKeys)("signIn.totpMfa.formTitle")})}),eW=e=>{if(!e)return"";let t=e.strategy;return"phoneNumberId"in e&&(t+=e.phoneNumberId),t},eV=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){let e=(0,f.useCoreSignIn)().supportedSecondFactors,t=o.useRef(""),[r,i]=o.useState(()=>(0,ea.bx)(e)),[a,l]=o.useState(!r),s=()=>l(e=>!e),c=()=>{t.current=eW(r)};if(!r)return(0,n.tZ)($.W,{});if(a)return(0,n.tZ)(eK,{onBackLinkClick:s,onFactorSelected:e=>{i(e),s()}});let d=t.current===eW(r);switch(null==r?void 0:r.strategy){case"phone_code":return(0,n.tZ)(eN,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:s});case"totp":return(0,n.tZ)(eX,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:s});case"backup_code":return(0,n.tZ)(eT,{onShowAlternativeMethodsClicked:s});case"email_code":return(0,n.tZ)(ex,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:s});case"email_link":return(0,n.tZ)(eD,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:s});default:return(0,n.tZ)($.W,{})}}))),eH=(0,D.Jh)((0,D.Hy)(D.L));r(28419),r(38062),r(79876);var e$=r(20645),eG=r(18350),ej=r(53621),eY=r(96620),eq=r(37321),eJ=r(87172);let eQ=e=>{var t;let{handleSubmit:r,phoneNumberFormState:i,onUseAnotherMethod:o,phoneCodeProvider:a}=e,{providerToDisplayData:l,strategyToDisplayData:c}=(0,S.vO)(),p=a.name,f=a.channel,g=(0,u.useCardState)();return(0,n.tZ)(d.Z.Root,{children:(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,showDivider:!0,children:[(0,n.tZ)(s.Col,{center:!0,children:(0,n.tZ)(s.Image,{src:null==(t=l[f])?void 0:t.iconUrl,alt:"".concat(c[f].name," logo"),sx:e=>({width:e.sizes.$7,height:e.sizes.$7,maxWidth:"100%",marginBottom:e.sizes.$6})})}),(0,n.tZ)(h.h.Title,{localizationKey:(0,s.localizationKeys)("signIn.start.alternativePhoneCodeProvider.title",{provider:p})}),(0,n.tZ)(h.h.Subtitle,{localizationKey:(0,s.localizationKeys)("signIn.start.alternativePhoneCodeProvider.subtitle",{provider:p})})]}),(0,n.tZ)(d.Z.Alert,{children:g.error}),(0,n.tZ)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:6,children:(0,n.BX)(F.l.Root,{onSubmit:r,gap:8,children:[(0,n.tZ)(s.Col,{gap:6,children:(0,n.tZ)(F.l.ControlRow,{elementId:"phoneNumber",children:(0,n.tZ)(F.l.PhoneInput,{...i.props,label:(0,s.localizationKeys)("signIn.start.alternativePhoneCodeProvider.label",{provider:p}),isRequired:!0,isOptional:!1,actionLabel:void 0,onActionClicked:void 0})})}),(0,n.BX)(s.Col,{center:!0,children:[(0,n.tZ)(eq.S,{}),(0,n.tZ)(s.Col,{gap:6,sx:{width:"100%"},children:(0,n.tZ)(F.l.SubmitButton,{hasArrow:!0,localizationKey:(0,s.localizationKeys)("formButtonPrimary")})})]}),(0,n.tZ)(s.Col,{center:!0,children:(0,n.tZ)(s.Button,{variant:"link",colorScheme:"neutral",onClick:o,localizationKey:(0,s.localizationKeys)("signIn.start.alternativePhoneCodeProvider.actionLink")})})]})})]})})},e0=e=>{var t;return!!(null==(t=e.supportedFirstFactors)?void 0:t.length)&&e.supportedFirstFactors.every(e=>"enterprise_sso"===e.strategy)},e1=e=>{let{field:t}=e,[r,i]=(0,o.useState)(!1),a=(0,o.useRef)(null),l=!!(r||(null==t?void 0:t.value));return((0,o.useLayoutEffect)(()=>{let e=setInterval(()=>{if(null==a?void 0:a.current){var t;let r="onAutoFillStart"===window.getComputedStyle(a.current,":autofill").animationName||!!(null==(t=a.current)?void 0:t.matches("*:-webkit-autofill"));r&&(i(r),clearInterval(e))}},500);return()=>{clearInterval(e)}},[]),(0,o.useEffect)(()=>{(null==t?void 0:t.value)&&""!==t.value&&i(!1)},[null==t?void 0:t.value]),t)?(0,n.tZ)(F.l.ControlRow,{elementId:t.id,sx:l?void 0:{position:"absolute",opacity:0,height:0,pointerEvents:"none",marginTop:"-1rem"},children:(0,n.tZ)(F.l.PasswordInput,{...t.props,ref:a,tabIndex:l?void 0:-1})}):null},e2=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){var e,t,a;let l=(0,u.useCardState)(),c=(0,i.cL)(),p=(0,S._m)(),{displayConfig:m,userSettings:I,authConfig:v}=(0,f.useEnvironment)(),y=(0,f.useCoreSignIn)(),{navigate:w}=(0,g.useRouter)(),C=(0,f.useSignInContext)(),{afterSignInUrl:_,signUpUrl:Z,waitlistUrl:b,isCombinedFlow:k,navigateOnSetActive:A}=C,z=(0,E.H)(),L=(0,eJ.o)(),K=(0,o.useMemo)(()=>(0,D.vX)(I.enabledFirstFactorIdentifiers),[I.enabledFirstFactorIdentifiers]),R=I.alternativePhoneCodeChannels,{isWebAuthnAutofillSupported:T}=(()=>{let[e,t]=(0,o.useState)(!1),{navigate:r}=(0,g.useRouter)(),n=ep(()=>r("factor-two")),{userSettings:i}=(0,f.useEnvironment)(),{passkeySettings:a,attributes:l}=i;return(0,o.useEffect)(()=>{var e;async function r(){let e=await (0,e$.h_)();t(e),e&&await n({flow:"autofill"})}a.allow_autofill&&(null==(e=l.passkey)?void 0:e.enabled)&&r()},[]),{isWebAuthnAutofillSupported:e}})(),M=ep(()=>w("factor-two")),O=(0,e$.iW)(),x=!!(null==(e=C.initialValues)?void 0:e.phoneNumber)&&!(C.initialValues.emailAddress||C.initialValues.username)&&K.includes("phone_number"),[N,X]=(0,o.useState)(x?"phone_number":K[0]||""),[W,V]=(0,o.useState)(!1),H=(0,eY.XV)("__clerk_ticket")||"",G=(0,eY.XV)("__clerk_status")||"",j=I.enabledFirstFactorIdentifiers,Y=I.web3FirstFactors,q=I.authenticatableSocialStrategies,J=I.instanceIsPasswordBased,{currentIdentifier:Q,nextIdentifier:et}=(0,D.vO)(K,N),er=(0,P.Yp)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password")}),[en,ei]=(0,o.useState)(null),el=I.alternativePhoneCodeChannels.length>0,es=C.initialValues||{},ec=(0,o.useMemo)(()=>({email_address:es.emailAddress,email_address_username:es.emailAddress||es.username,username:es.username,phone_number:es.phoneNumber}),[C.initialValues]),ed=!!q.length||!!Y.length||!!R.length,[eu,eh]=(0,o.useState)(!(0,ej.s)()&&!ed),em=(0,P.Yp)("identifier",ec[N]||"",{...Q,isRequired:!0,transformer:e=>e.trim()}),eI=(0,P.Yp)("identifier",ec.phone_number||"",{...Q,isRequired:!0}),eS="phone_number"===N?eI:em;(0,o.useLayoutEffect)(()=>{if(eS.value.startsWith("+")&&K.includes("phone_number")&&"phone_number"!==N&&!W){var e;e=eS.value,em.setValue(ec[N]||""),eI.setValue(e),X("phone_number"),eh(!0),V(!0)}},[eS.value,K]),(0,o.useEffect)(()=>{if(H){if("sign_up"===G){let e=new URLSearchParams;H&&e.set("__clerk_ticket",H),w(k?"create":Z,{searchParams:e});return}p.setLoading(),l.setLoading(),y.create({strategy:"ticket",ticket:H}).then(e=>{switch(e.status){case"needs_first_factor":if(!e0(e)||ef(e.supportedFirstFactors))return w("factor-one");return ey();case"needs_second_factor":return w("factor-two");case"complete":return(0,eY.xy)("__clerk_ticket"),c.setActive({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await A({session:t,redirectUrl:_})}});default:return void console.error((0,B.Ws)(e.status,z))}}).catch(e=>ew(e)).finally(()=>{e0(y)||(p.setIdle(),l.setIdle())})}},[]),(0,o.useEffect)(()=>{!async function(){var e;let t=null==y||null==(e=y.firstFactorVerification)?void 0:e.error;if(t){switch(t.code){case ee.O1.NOT_ALLOWED_TO_SIGN_UP:case ee.O1.OAUTH_ACCESS_DENIED:case ee.O1.NOT_ALLOWED_ACCESS:case ee.O1.SAML_USER_ATTRIBUTE_MISSING:case ee.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case ee.O1.USER_LOCKED:case ee.O1.EXTERNAL_ACCOUNT_NOT_FOUND:case ee.O1.SIGN_UP_MODE_RESTRICTED:case ee.O1.SIGN_UP_MODE_RESTRICTED_WAITLIST:case ee.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case ee.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ee.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case ee.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ee.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:case ee.O1.CAPTCHA_INVALID:case ee.O1.FRAUD_DEVICE_BLOCKED:case ee.O1.FRAUD_ACTION_BLOCKED:case ee.O1.SIGNUP_RATE_LIMIT_EXCEEDED:case ee.O1.USER_BANNED:l.setError(t);break;default:l.setError("Unable to complete action at this time. If the problem persists please contact support.")}await y.create({})}}()},[]);let ev=async function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let i=(null==en?void 0:en.channel)||(0,ea.Vs)(r,v.preferredChannels,"identifier");if(i){let e=()=>{};r.push({id:"strategy",value:"phone_code",clearFeedback:e,setValue:e,onChange:e,setError:e}),r.push({id:"channel",value:i,clearFeedback:e,setValue:e,onChange:e,setError:e})}try{let t,n=await (t=y.create((e=>{let t=e.some(e=>"password"===e.name&&!!e.value);return(!t||I.enterpriseSSO.enabled)&&(e=e.filter(e=>"password"!==e.name)),{...(0,P.ni)(e),...t&&!I.enterpriseSSO.enabled&&{strategy:"password"}}})(r)),t.then(e=>{var t,n;if(!I.enterpriseSSO.enabled)return e;let i=null==(t=r.find(e=>"password"===e.name))?void 0:t.value;return!i||(null==(n=e.supportedFirstFactors)?void 0:n.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy))?e:e.attemptFirstFactor({strategy:"password",password:i})}));switch(n.status){case"needs_identifier":(null==(e=n.supportedFirstFactors)?void 0:e.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy))&&await ey();break;case"needs_first_factor":if(!e0(n)||ef(n.supportedFirstFactors))return w("factor-one");return ey();case"needs_second_factor":return w("factor-two");case"complete":return c.setActive({session:n.createdSessionId,navigate:async e=>{let{session:t}=e;await A({session:t,redirectUrl:_})}});default:return void console.error((0,B.Ws)(n.status,z))}}catch(e){return ew(e)}},ey=async()=>{let e=(0,D.wT)(C,m.signInUrl),t=C.afterSignInUrl||"/";return y.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:e,redirectUrlComplete:t,oidcPrompt:C.oidcPrompt,continueSignIn:!0})},ew=async e=>{if(!e.errors)return;let t=e.errors.find(e=>e.code===ee.O1.INVALID_STRATEGY_FOR_USER||e.code===ee.O1.FORM_PASSWORD_INCORRECT||e.code===ee.O1.FORM_PASSWORD_PWNED),n=e.errors.find(e=>e.code===ee.O1.SESSION_EXISTS),i=e.errors.find(e=>"identifier_already_signed_in"===e.code),o=e.errors.find(e=>e.code===ee.O1.INVITATION_ACCOUNT_NOT_EXISTS||e.code===ee.O1.FORM_IDENTIFIER_NOT_FOUND);if(t)await ev(eS);else if(n)await c.setActive({session:c.client.lastActiveSessionId,navigate:async e=>{let{session:t}=e;await A({session:t,redirectUrl:_})}});else if(i){let e=i.meta.sessionId;await c.setActive({session:e,navigate:async e=>{let{session:t}=e;await A({session:t,redirectUrl:_})}})}else if(k&&o){var a,s;let e=(0,ea.s2)(eS);if(I.signUp.mode===ee.ci.WAITLIST)return w(c.buildWaitlistUrl("emailAddress"===e?{initialValues:{[e]:eS.value}}:{}));c.client.signUp[e]=eS.value;let t=(0,D.wT)(C,m.signUpUrl),n=C.afterSignUpUrl||"/";return function(e){var t,n;let{identifierAttribute:i,identifierValue:o,signUpMode:a,navigate:l,organizationTicket:s,afterSignUpUrl:c,clerk:d,handleError:u,redirectUrl:h,redirectUrlComplete:p,passwordEnabled:f,navigateOnSetActive:g,alternativePhoneCodeChannel:m,unsafeMetadata:I}=e;if(a===ee.ci.WAITLIST)return l(d.buildWaitlistUrl("emailAddress"===i?{initialValues:{[i]:o}}:{}));d.client.signUp[i]=o;let S=new URLSearchParams;return(s&&S.set("__clerk_ticket",s),f||(t=d.client.signUp,n=i,t.optionalFields.filter(e=>!(e.startsWith("oauth_")||e.startsWith("web3_")||["enterprise_sso","saml"].includes(e))&&"password"!==e&&("phoneNumber"!==n||"phone_number"!==e)).length>0)||"emailAddress"!==i&&"phoneNumber"!==i)?l("create",{searchParams:S}):d.client.signUp.create({[i]:o,...m?{strategy:"phone_code",channel:m}:{},unsafeMetadata:I}).then(async e=>(await Promise.all([r.e("1192"),r.e("9573"),r.e("1710")]).then(r.bind(r,46052)).then(e=>e.completeSignUpFlow))({signUp:e,verifyEmailPath:"create/verify-email-address",verifyPhonePath:"create/verify-phone-number",handleComplete:()=>d.setActive({session:e.createdSessionId,navigate:async e=>{let{session:t}=e;await g({session:t,redirectUrl:c})}}),navigate:l,redirectUrl:h,redirectUrlComplete:p})).catch(e=>u(e))}({afterSignUpUrl:C.afterSignUpUrl||"/",clerk:c,handleError:e=>(0,U.S3)(e,[eS,er],l.setError),identifierAttribute:e,identifierValue:eS.value,navigate:w,organizationTicket:H,signUpMode:I.signUp.mode,redirectUrl:t,redirectUrlComplete:n,navigateOnSetActive:A,passwordEnabled:null!=(s=null==(a=I.attributes.password)?void 0:a.required)&&s,alternativePhoneCodeChannel:(null==en?void 0:en.channel)||(0,ea.mQ)(v.preferredChannels,e,eS.value),unsafeMetadata:C.unsafeMetadata})}else(0,U.S3)(e,[eS,er],l.setError)},eC=async e=>(e.preventDefault(),ev(eS,er)),e_=(0,o.useMemo)(()=>({tel:F.l.PhoneInput,password:F.l.PasswordInput,text:F.l.PlainInput,email:F.l.PlainInput})[eS.type],[eS.type]);if(p.isLoading||"sign_up"===G)return(0,n.tZ)($.W,{});let{action:eZ,validLastAuthenticationStrategies:eb,...ek}=eS.props,eA=null==(t=c.client)?void 0:t.lastAuthenticationStrategy,eF=!!eA&&L>1&&(null==eb?void 0:eb.has(eA));return(0,n.tZ)(s.Flow.Part,{part:"start",children:en?(0,n.tZ)(eQ,{handleSubmit:eC,phoneNumberFormState:eI,onUseAnotherMethod:()=>{ei(null)},phoneCodeProvider:en}):(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(h.h.Root,{showLogo:!0,children:[(0,n.tZ)(h.h.Title,{localizationKey:k?(0,s.localizationKeys)("signIn.start.titleCombined"):(0,s.localizationKeys)("signIn.start.title")}),(0,n.tZ)(h.h.Subtitle,{localizationKey:k?(0,s.localizationKeys)("signIn.start.subtitleCombined"):(0,s.localizationKeys)("signIn.start.subtitle"),sx:{"&:empty":{display:"none"}}})]}),(0,n.tZ)(d.Z.Alert,{children:l.error}),(0,n.BX)(s.Col,{elementDescriptor:s.descriptors.main,gap:6,children:[(0,n.BX)(eG.G,{children:[ed&&(0,n.tZ)(eo,{enableWeb3Providers:!0,enableOAuthProviders:!0,enableAlternativePhoneCodeProviders:el,onAlternativePhoneCodeProviderClick:e=>{ei((0,eg.H)(e)||null)}}),j.length?(0,n.BX)(F.l.Root,{onSubmit:eC,gap:8,children:[(0,n.BX)(s.Col,{gap:6,children:[(0,n.tZ)(F.l.ControlRow,{elementId:eS.id,children:(0,n.tZ)(e_,{actionLabel:null==et?void 0:et.action,onActionClicked:()=>{X(e=>K[(K.indexOf(e)+1)%K.length]),eh(!0),V(!1)},...ek,autoFocus:eu,autoComplete:T?"webauthn":void 0,isLastAuthenticationStrategy:eF})}),(0,n.tZ)(e1,{field:J?er:void 0})]}),(0,n.BX)(s.Col,{center:!0,children:[(0,n.tZ)(eq.S,{}),(0,n.tZ)(F.l.SubmitButton,{hasArrow:!0})]})]}):null]}),!j.length&&(0,n.tZ)(eq.S,{}),(null==(a=I.attributes.passkey)?void 0:a.enabled)&&I.passkeySettings.show_sign_in_button&&O&&(0,n.tZ)(d.Z.Action,{elementId:"usePasskey",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("signIn.start.actionLink__use_passkey"),onClick:()=>M({flow:"discoverable"})})})]})]}),(0,n.BX)(d.Z.Footer,{children:[I.signUp.mode===ee.ci.PUBLIC&&!k&&(0,n.BX)(d.Z.Action,{elementId:"signIn",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,s.localizationKeys)("signIn.start.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("signIn.start.actionLink"),to:c.buildUrlWithAuth(Z)})]}),I.signUp.mode===ee.ci.WAITLIST&&(0,n.BX)(d.Z.Action,{elementId:"signIn",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,s.localizationKeys)("signIn.start.actionText__join_waitlist")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,s.localizationKeys)("signIn.start.actionLink__join_waitlist"),to:c.buildUrlWithAuth(b)})]})]})]})})})));function e3(){let e=(0,i.cL)();return o.useEffect(()=>{e.redirectToSignIn()},[e]),null}function e5(){let e=(0,f.useSignInContext)(),t=(0,f.useSignUpContext)();return(0,n.tZ)(s.Flow.Root,{flow:"signIn",children:(0,n.BX)(g.Switch,{children:[(0,n.tZ)(g.Route,{path:"factor-one",children:(0,n.tZ)(eE,{})}),(0,n.tZ)(g.Route,{path:"factor-two",children:(0,n.tZ)(eV,{})}),(0,n.tZ)(g.Route,{path:"reset-password",children:(0,n.tZ)(L,{})}),(0,n.tZ)(g.Route,{path:"reset-password-success",children:(0,n.tZ)(T,{})}),(0,n.tZ)(g.Route,{path:"sso-callback",children:(0,n.tZ)(eH,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signInForceRedirectUrl:e.afterSignInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,continueSignUpUrl:e.signUpContinueUrl,transferable:e.transferable,firstFactorUrl:"../factor-one",secondFactorUrl:"../factor-two",resetPasswordUrl:"../reset-password",unsafeMetadata:e.unsafeMetadata})}),(0,n.tZ)(g.Route,{path:"choose",children:(0,n.tZ)(V,{})}),(0,n.tZ)(g.Route,{path:"choose-wallet",children:(0,n.tZ)(I,{})}),(0,n.tZ)(g.Route,{path:"verify",children:(0,n.tZ)(a.J,{redirectUrlComplete:e.afterSignInUrl,redirectUrl:"../factor-two"})}),e.isCombinedFlow&&(0,n.BX)(g.Route,{path:"create",children:[(0,n.tZ)(g.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,n.tZ)(Z,{})}),(0,n.tZ)(g.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,n.tZ)(_,{})}),(0,n.tZ)(g.Route,{path:"sso-callback",children:(0,n.tZ)(k,{signUpUrl:t.signUpUrl,signInUrl:t.signInUrl,signUpForceRedirectUrl:t.afterSignUpUrl,signInForceRedirectUrl:t.afterSignInUrl,secondFactorUrl:t.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number",unsafeMetadata:t.unsafeMetadata})}),(0,n.tZ)(g.Route,{path:"verify",children:(0,n.tZ)(a.$,{redirectUrlComplete:t.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue"})}),(0,n.BX)(g.Route,{path:"continue",children:[(0,n.tZ)(g.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,n.tZ)(Z,{})}),(0,n.tZ)(g.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,n.tZ)(_,{})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(A,{})})]}),(0,n.tZ)(g.Route,{path:"tasks",children:(0,n.tZ)(y.x7,{redirectUrlComplete:e.afterSignUpUrl})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(b,{})})]}),(0,n.tZ)(g.Route,{path:"tasks",children:(0,n.tZ)(y.x7,{redirectUrlComplete:e.afterSignInUrl})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(e2,{})}),(0,n.tZ)(g.Route,{children:(0,n.tZ)(e3,{})})]})})}let e7=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,S.ib)(e?C:void 0,"preloadComponent",{staleTime:1/0})};e5.displayName="SignIn";let e4=(0,f.withCoreSessionSwitchGuard)(function(){let e=(0,f.useSignInContext)(),t={componentName:"SignUp",emailLinkRedirectUrl:e.emailLinkRedirectUrl,ssoCallbackUrl:e.ssoCallbackUrl,forceRedirectUrl:e.signUpForceRedirectUrl,fallbackRedirectUrl:e.signUpFallbackRedirectUrl,signInUrl:e.signInUrl,unsafeMetadata:e.unsafeMetadata,...(0,w.L)({routing:null==e?void 0:e.routing,path:null==e?void 0:e.path})};return e7(e.isCombinedFlow),(0,v.z)(),(0,n.tZ)(f.SignUpContext.Provider,{value:t,children:(0,n.tZ)(e5,{})})}),e6=e=>{let t={signUpUrl:"/".concat(g.VIRTUAL_ROUTER_BASE_PATH,"/sign-up"),waitlistUrl:"/".concat(g.VIRTUAL_ROUTER_BASE_PATH,"/waitlist"),...e};return(0,n.tZ)(g.Route,{path:"sign-in",children:(0,n.tZ)(f.SignInContext.Provider,{value:{componentName:"SignIn",...t,routing:"virtual",mode:"modal"},children:(0,n.tZ)("div",{children:(0,n.tZ)(e4,{...t,routing:"virtual"})})})})}},95518:function(e,t,r){r.d(t,{Vh:()=>f,Vs:()=>m,bx:()=>h,mQ:()=>I,s2:()=>g,t3:()=>c,xT:()=>u}),r(28419),r(56113),r(72642);var n=r(20645),i=r(98690),o=r(7772),a=r(90577);let l=e=>t=>"safeIdentifier"in t&&t.safeIdentifier===e;function s(e){if((0,n.iW)()){let t=e.find(e=>{let{strategy:t}=e;return"passkey"===t});if(t)return t}return null}function c(e,t,r){return e&&0!==e.length?r===o.kJ.Password?function(e,t){let r=s(e);if(r)return r;let n=e.sort(a.sZ)[0];return"password"===n.strategy?n:e.find(l(t))||n||null}(e,t):function(e,t){let r=s(e);if(r)return r;let n=e.sort(a.b8),i=n.find(l(t));if(i)return i;let o=n[0];return"email_link"===o.strategy?o:e.find(l(t))||o||null}(e,t):null}let d=["passkey","email_code","password","phone_code","email_link"];function u(e){return!!e&&d.includes(e.strategy)}function h(e){if(!e||0===e.length)return null;let t=e.find(e=>"totp"===e.strategy);if(t)return t;let r=e.find(e=>"phone_code"===e.strategy);return r||e[0]}let p=["reset_password_phone_code","reset_password_email_code"],f=e=>!!e&&p.includes(e);function g(e){let t;return"tel"===e.type?"phoneNumber":(t=e.value,/^\S+@\S+\.\S+$/.test(t))?"emailAddress":"username"}let m=(e,t,r)=>{var n,o;if(!t)return null;let a=null==(n=e.find(e=>"strategy"===e.id))?void 0:n.value;if(a&&"phone_code"!==a)return null;let l=null==(o=e.find(e=>e.id===r))?void 0:o.value;if(!l||!(null==l?void 0:l.startsWith("+")))return null;let s=(0,i.jR)(l,t);return"sms"===s?null:s},I=(e,t,r)=>{if(!e||!t||"phoneNumber"!==t||!r||!(null==r?void 0:r.startsWith("+")))return null;let n=(0,i.jR)(r,e);return"sms"===n?null:n}}}]);