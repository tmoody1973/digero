"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["5192"],{88493:function(e,t,i){i.d(t,{l:()=>_});var r=i(73312),a=i(41024),l=i(61869),n=i(69144),o=i(2672),s=i(70431),c=i(19460),d=i(96443),u=i(88870),p=i(86842),m=i(36788),h=i(11576),g=i(64204),b=i(93266),f=i(17703),v=i(51217),x=i(90408);let Z=e=>/^\S+@\S+\.\S+$/.test(e),_=e=>{let{onSuccess:t,onReset:i,resetButtonLabel:h}=e,{organization:b,invitations:x}=(0,l.o8)({invitations:{pageSize:10,keepPreviousData:!0}}),_=(0,o.useCardState)(),{t:S,locale:y}=(0,f.zJ)(),[C,T]=(0,n.useState)(!1),w=(0,m.Yp)("emailAddress","",{type:"text",label:(0,f.u1)("formFieldLabel__emailAddresses")}),$=(0,m.Yp)("role","",{label:(0,f.u1)("formFieldLabel__role")});if(!b)return null;let{props:{setError:k,setWarning:P,setSuccess:B,setInfo:A,isFocused:F,validatePassword:D,setHasPassedComplexity:K,hasPassedComplexity:R,feedback:X,feedbackType:E,clearFeedback:I,...M}}=w,L=(!!w.value.length||C)&&!!$.value;return(0,r.BX)(s.l.Root,{onSubmit:e=>{if(e.preventDefault(),!L)return;let i=new FormData(e.currentTarget);return b.inviteMembers({emailAddresses:w.value.split(","),role:i.get("role")}).then(async()=>(await x?.revalidate?.(),t?.())).catch(e=>{if(!(0,a.kD)(e))return void(0,u.S3)(e,[],_.setError);switch((e=>{let t=new Set([...e.meta?.emailAddresses??[],...e.meta?.identifiers??[]]),i=w.value.split(",");w.setValue(i.filter(e=>!t.has(e)).join(","))})(e.errors[0]),e.errors?.[0]?.code){case"duplicate_record":{let t=e.errors[0].meta?.emailAddresses||[];_.setError(S((0,f.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,p.z$)(t,y)})));break}case"already_a_member_in_organization":{let t=e.errors[0].longMessage??"",i=t.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/)?.[0];(0,u.S3)(e,[],e=>i?_.setError(S((0,f.u1)("unstable__errors.already_a_member_in_organization",{email:i}))):_.setError(e));break}default:(0,u.S3)(e,[],_.setError)}})},children:[(0,r.tZ)(s.l.ControlRow,{elementId:w.id,children:(0,r.tZ)(d.E,{...M,autoFocus:!0,validate:Z,sx:{width:"100%"},validateUnsubmittedEmail:e=>T(Z(e)),placeholder:(0,f.u1)("formFieldInputPlaceholder__emailAddresses")})}),(0,r.BX)(g.Flex,{align:"center",justify:"between",sx:e=>({marginTop:e.space.$2,gap:e.space.$4,flexWrap:"wrap",[v.mqu.sm]:{justifyContent:"center"}}),children:[(0,r.tZ)(z,{...$}),(0,r.BX)(c.K,{sx:e=>({margin:e.space.$none,flexWrap:"wrap",justifyContent:"center"}),children:[(0,r.tZ)(s.l.SubmitButton,{block:!1,isDisabled:!L,localizationKey:(0,f.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,r.tZ)(s.l.ResetButton,{localizationKey:h||(0,f.u1)("userProfile.formButtonReset"),block:!1,onClick:i})]})]})]})},z=e=>{let{options:t,isLoading:i,hasRoleSetMigration:a}=(0,b.e)(),{t:l}=(0,f.zJ)(),o=S();return(0,n.useEffect)(()=>{!e.value&&o&&t?.some(e=>e.value===o)&&e.setValue(o)},[o,t,e]),(0,r.tZ)(s.l.ControlRow,{elementId:e.id,children:(0,r.tZ)(g.Flex,{direction:"col",gap:2,children:(0,r.tZ)(x.DQ,{...e.props,roles:t,isDisabled:i||a,onChange:t=>e.setValue(t),triggerSx:e=>({minWidth:e.sizes.$40,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48}),prefixLocalizationKey:`${l((0,f.u1)("formFieldLabel__role"))}:`})})})},S=()=>{let{options:e}=(0,b.e)(),{organizationSettings:t}=(0,h.useEnvironment)(),i=t.domains.defaultRole;return i||e?.length!==1||(i=e[0].value),i}},45727:function(e,t,i){i.d(t,{a:()=>x,N:()=>v});var r=i(73312),a=i(61869),l=i(2672),n=i(68487),o=i(19566),s=i(67263),c=i(63872),d=i(96231),u=i(11576),p=i(64204),m=i(44709),h=i(34174),g=i(24676);let b=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{let i=(0,g.useRouter)();return(0,r.BX)(p.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,r.tZ)(p.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,r.BX)(p.Text,{children:["This organization is limited to ",(0,c.OR)(t)," members.",(0,r.tZ)("br",{}),(0,r.tZ)(p.Link,{sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,c.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var f=i(88493);let v=(0,l.withCardStateProvider)(e=>{let{close:t}=(0,m.XC)(),{onReset:i=t}=e,o=(0,p.localizationKeys)("organizationProfile.invitePage.title"),h=(0,p.localizationKeys)("organizationProfile.invitePage.subtitle"),g=(0,l.useCardState)(),v=(0,d.a2)({onNextStep:()=>g.setError(void 0)}),{organization:Z}=(0,a.o8)(),{__unstable_manageBillingUrl:_,__unstable_manageBillingMembersLimit:z}=(0,u.useOrganizationProfileContext)();if(!Z)return null;let S=!!z&&(0,c.OR)(z)<=Z.pendingInvitationsCount+Z.membersCount;return(0,r.BX)(d.en,{...v.props,children:[(0,r.BX)(n.Y,{headerTitle:o,headerSubtitle:h,children:[S&&_&&(0,r.tZ)(b,{__unstable_manageBillingUrl:_,__unstable_manageBillingMembersLimit:z}),(0,r.tZ)(f.l,{onSuccess:v.nextStep,onReset:i})]}),(0,r.tZ)(s.I,{title:o,onFinish:t,contents:(0,r.tZ)(x,{})})]})}),x=()=>(0,r.BX)(p.Flex,{direction:"col",center:!0,gap:4,children:[(0,r.tZ)(o.f,{boxElementDescriptor:p.descriptors.invitationsSentIconBox,iconElementDescriptor:p.descriptors.invitationsSentIcon,icon:h.GT}),(0,r.tZ)(p.Text,{localizationKey:(0,p.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},90408:function(e,t,i){i.d(t,{DQ:()=>p,RN:()=>u,wQ:()=>c});var r=i(73312),a=i(69144),l=i(77691),n=i(3146),o=i(64204),s=i(93266);let c=e=>{let{headers:t,page:i,onPageChange:a,rows:n,isLoading:s,itemCount:c,itemsPerPage:u,pageCount:p,emptyStateLocalizationKey:m}=e,h=c>0?Math.max(0,(i-1)*u)+1:0,g=Math.min(i*u,c);return(0,r.BX)(o.Col,{gap:4,sx:{width:"100%"},children:[(0,r.tZ)(o.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,r.BX)(o.Table,{children:[(0,r.tZ)(o.Thead,{children:(0,r.tZ)(o.Tr,{children:t.map((e,t)=>(0,r.tZ)(o.Th,{elementDescriptor:o.descriptors.tableHead,localizationKey:e},t))})}),(0,r.tZ)(o.Tbody,{children:s?(0,r.tZ)(o.Tr,{children:(0,r.tZ)(o.Td,{colSpan:4,children:(0,r.tZ)(o.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:o.descriptors.spinner})})}):n.length?n:(0,r.tZ)(d,{localizationKey:m},"empty")})]})}),p>1&&(0,r.tZ)(l.t,{count:p,page:i,onChange:a,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:h,endingRow:g}})]})},d=e=>(0,r.tZ)(o.Tr,{children:(0,r.tZ)(o.Td,{colSpan:4,children:(0,r.tZ)(o.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),u=e=>(0,r.tZ)(o.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})}),p=e=>{let{value:t,fallbackLabel:i,roles:l,onChange:c,isDisabled:d,triggerSx:u,optionListSx:p,prefixLocalizationKey:h}=e,{localizeCustomRole:g}=(0,s.q)(),b=(0,a.useMemo)(()=>[...l||[]],[l]),f=(0,a.useMemo)(()=>b.find(e=>e.value===t),[b,t]),{t:v}=(0,o.useLocalizations)(),x=(0,a.useMemo)(()=>b.map(e=>({value:e.value,label:g(e.value)||e.label})),[b,g]);return(0,r.BX)(n.Ph,{elementId:"role",options:x,value:t,placeholder:v((0,o.localizationKeys)("organizationProfile.invitePage.selectDropdown__role")),onChange:e=>c(e.value),renderOption:(e,t,i)=>(0,r.tZ)(m,{isSelected:i,option:e}),children:[(0,r.tZ)("input",{name:"role",type:"hidden",value:t}),(0,r.tZ)(n.UN,{sx:u||(e=>({color:e.colors.$colorForeground,backgroundColor:"transparent",textWrap:"nowrap"})),isDisabled:d||!!t&&b.length>0&&!f,children:f?.label||f?.value?(0,r.BX)(o.Flex,{as:"span",gap:1,children:[h&&(0,r.tZ)(o.Text,{as:"span",colorScheme:"secondary",localizationKey:h}),(0,r.tZ)(o.Text,{as:"span",colorScheme:"body",children:g(f?.value)||f?.label})]}):i?(0,r.tZ)(o.Text,{as:"span",colorScheme:"body",children:i}):null}),(0,r.tZ)(n.pp,{sx:p})]})},m=(0,a.memo)(e=>{let{option:t,isSelected:i,sx:a,...l}=e;return(0,r.tZ)(o.Flex,{sx:[e=>({width:"100%",padding:`${e.space.$2} ${e.space.$4}`,borderRadius:e.radii.$md,"&:hover":{backgroundColor:e.colors.$neutralAlpha100},'&[data-focused="true"]':{backgroundColor:e.colors.$neutralAlpha150}}),a],...l,children:(0,r.tZ)(o.Text,{variant:"subtitle",children:t?.label})})})},8181:function(e,t,i){i.d(t,{D:()=>s});var r=i(73312),a=i(6654),l=i(25623),n=i(64204),o=i(17703);let s=e=>{let{organization:t,showLoadingSpinner:i,...s}=e;return(0,r.BX)(n.Col,{elementDescriptor:n.descriptors.organizationAvatarUploaderContainer,children:[(0,r.tZ)(n.Text,{variant:"subtitle",sx:e=>({textAlign:"left",marginBottom:e.space.$2}),localizationKey:(0,o.u1)("organizationProfile.start.profileSection.uploadAction__title")}),(0,r.tZ)(a.C,{...s,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,r.tZ)(l.l,{size:e=>e.sizes.$16,showLoadingSpinner:i,...t})})]})}},57484:function(e,t,i){i.d(t,{AO:()=>r,Sz:()=>a});let r={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},a=(e,t,i)=>{if(void 0===t)return[{data:[e],total_count:1}];let r=t?.[t.length-1]?.total_count||1;return t.map(t=>{if(void 0===t)return t;let a=t.data.map(t=>t.id===e.id?{...e}:t);return{...t,data:a,total_count:"negative"===i?r-1:r}})}}}]);