"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8877"],{51618:function(e,t,s){s.r(t),s.d(t,{SessionTasks:()=>f});var r=s(73312),i=s(61869),o=s(67964),a=s(69144),n=s(64204),l=s(92418),d=s(2672),c=s(21455),u=s(76663),h=s(86988),Z=s(24676),w=s(7008),p=s(13678);let m=()=>{let e=(0,i.cL)(),{navigate:t}=(0,Z.useRouter)(),{redirectUrlComplete:s}=(0,h.G)();return(0,a.useEffect)(()=>{let s=setTimeout(()=>{let s=e.session?.currentTask?.key;s&&t(`./${u.fr[s]}`)},500);return()=>clearTimeout(s)},[t,e,s]),(0,r.tZ)(n.Flow.Part,{part:"start",children:(0,r.BX)(l.Z.Root,{children:[(0,r.tZ)(l.Z.Content,{children:(0,r.tZ)(c.I,{})}),(0,r.tZ)(l.Z.Footer,{})]})})};function k(){let e=(0,h.G)();return(0,r.tZ)(n.Flow.Root,{flow:"tasks",children:(0,r.BX)(Z.Switch,{children:[(0,r.tZ)(Z.Route,{path:u.fr["choose-organization"],children:(0,r.tZ)(h.md.Provider,{value:{componentName:"TaskChooseOrganization",redirectUrlComplete:e.redirectUrlComplete},children:(0,r.tZ)(w.TaskChooseOrganization,{})})}),(0,r.tZ)(Z.Route,{path:u.fr["reset-password"],children:(0,r.tZ)(h.mf.Provider,{value:{componentName:"TaskResetPassword",redirectUrlComplete:e.redirectUrlComplete},children:(0,r.tZ)(p.TaskResetPassword,{})})}),(0,r.tZ)(Z.Route,{index:!0,children:(0,r.tZ)(m,{})})]})})}let f=(0,d.withCardStateProvider)(({redirectUrlComplete:e})=>{let t=(0,i.cL)(),{navigate:s}=(0,Z.useRouter)(),n=(0,a.useRef)(null);return((0,a.useEffect)(()=>{let r=t.session?.currentTask;if(!r||t.session?.status==="active")return void s(e);t.telemetry?.record((0,o.Zg)("SessionTask",{task:r.key}))},[t,s,e]),t.session?.currentTask)?(0,r.tZ)(h.Hs.Provider,{value:{redirectUrlComplete:e},children:(0,r.tZ)(k,{})}):(0,r.BX)(l.Z.Root,{sx:()=>({minHeight:n?n.current?.offsetHeight:void 0}),children:[(0,r.tZ)(l.Z.Content,{sx:()=>({flex:1}),children:(0,r.tZ)(c.I,{})}),(0,r.tZ)(l.Z.Footer,{})]})})},13678:function(e,t,s){s.r(t),s.d(t,{TaskResetPassword:()=>f});var r=s(73312),i=s(61869),o=s(11576),a=s(86988),n=s(64204),l=s(92418),d=s(2672),c=s(70431),u=s(92654),h=s(96352),Z=s(54264),w=s(88870),p=s(86842),m=s(36788),k=s(25135);let f=(0,o.withCoreSessionSwitchGuard)((0,k.U)((0,d.withCardStateProvider)(()=>{let e=(0,i.cL)(),t=(0,d.useCardState)(),{userSettings:{passwordSettings:s}}=(0,o.useEnvironment)(),{t:k,locale:f}=(0,n.useLocalizations)(),{redirectUrlComplete:g}=(0,a.y2)(),{otherSessions:y}=(0,Z.j)({user:e.user}),{navigateAfterSignOut:P,navigateAfterMultiSessionSingleSignOutUrl:R}=(0,o.useSignOutContext)(),C=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:v}=(0,a.G)(),b=(0,m.Yp)("newPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,p.GM)(e,{t:k,locale:f,passwordSettings:s})}),O=(0,m.Yp)("confirmPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),S=(0,m.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,n.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:z,isPasswordMatch:T}=(0,h.p5)({passwordField:b,confirmPasswordField:O}),F=e.user?.primaryEmailAddress?.emailAddress??e.user?.username;return(0,r.tZ)(n.Flow.Root,{flow:"taskResetPassword",children:(0,r.tZ)(n.Flow.Part,{part:"resetPassword",children:(0,r.BX)(l.Z.Root,{children:[(0,r.BX)(l.Z.Content,{children:[(0,r.BX)(u.h.Root,{showLogo:!0,children:[(0,r.tZ)(u.h.Title,{localizationKey:(0,n.localizationKeys)("taskResetPassword.title")}),(0,r.tZ)(u.h.Subtitle,{localizationKey:(0,n.localizationKeys)("taskResetPassword.subtitle")})]}),(0,r.tZ)(l.Z.Alert,{children:t.error}),(0,r.tZ)(n.Col,{elementDescriptor:n.descriptors.main,gap:8,children:(0,r.BX)(c.l.Root,{onSubmit:()=>{t.runAsync(async()=>{if(e.user){b.clearFeedback(),O.clearFeedback();try{await C(e.user,[{newPassword:b.value,signOutOfOtherSessions:S.checked}]),await e.setActive({session:e.session,navigate:async({session:e})=>{await v?.({session:e,redirectUrlComplete:g})}})}catch(e){return(0,w.S3)(e,[b,O],t.setError)}}})},onBlur:()=>{b.value&&z(O.value)},gap:8,children:[(0,r.BX)(n.Col,{gap:6,children:[(0,r.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.user?.primaryEmailAddress?.emailAddress||e.user?.username||"",style:{display:"none"}}),(0,r.tZ)(c.l.ControlRow,{elementId:b.id,children:(0,r.tZ)(c.l.PasswordInput,{...b.props,isRequired:!0,minLength:6})}),(0,r.tZ)(c.l.ControlRow,{elementId:O.id,children:(0,r.tZ)(c.l.PasswordInput,{...O.props,onChange:e=>(e.target.value&&z(e.target.value),O.props.onChange(e))})}),(0,r.tZ)(c.l.ControlRow,{elementId:S.id,children:(0,r.tZ)(c.l.Checkbox,{...S.props})})]}),(0,r.tZ)(n.Col,{gap:3,children:(0,r.tZ)(c.l.SubmitButton,{isLoading:t.isLoading,isDisabled:!T,localizationKey:(0,n.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,r.tZ)(l.Z.Footer,{children:(0,r.BX)(l.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[F&&(0,r.tZ)(l.Z.ActionText,{truncate:!0,localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:F})}),(0,r.tZ)(l.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{0===y.length?e?.signOut(P):e?.signOut(R,{sessionId:e.session?.id})},localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))}}]);