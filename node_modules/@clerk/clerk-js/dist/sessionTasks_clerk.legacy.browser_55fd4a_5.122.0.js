"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8877"],{51618:function(e,t,s){s.r(t),s.d(t,{SessionTasks:()=>k});var r=s(73312),i=s(61869),o=s(67964),l=s(69144),n=s(64204),a=s(92418),d=s(2672),c=s(21455),u=s(76663),h=s(86988),Z=s(24676),w=s(7008),p=s(13678);let m=()=>{let e=(0,i.cL)(),{navigate:t}=(0,Z.useRouter)(),{redirectUrlComplete:s}=(0,h.G)();return(0,l.useEffect)(()=>{let s=setTimeout(()=>{var s,r;let i=null==(r=e.session)||null==(s=r.currentTask)?void 0:s.key;i&&t("./".concat(u.fr[i]))},500);return()=>clearTimeout(s)},[t,e,s]),(0,r.tZ)(n.Flow.Part,{part:"start",children:(0,r.BX)(a.Z.Root,{children:[(0,r.tZ)(a.Z.Content,{children:(0,r.tZ)(c.I,{})}),(0,r.tZ)(a.Z.Footer,{})]})})};function v(){let e=(0,h.G)();return(0,r.tZ)(n.Flow.Root,{flow:"tasks",children:(0,r.BX)(Z.Switch,{children:[(0,r.tZ)(Z.Route,{path:u.fr["choose-organization"],children:(0,r.tZ)(h.md.Provider,{value:{componentName:"TaskChooseOrganization",redirectUrlComplete:e.redirectUrlComplete},children:(0,r.tZ)(w.TaskChooseOrganization,{})})}),(0,r.tZ)(Z.Route,{path:u.fr["reset-password"],children:(0,r.tZ)(h.mf.Provider,{value:{componentName:"TaskResetPassword",redirectUrlComplete:e.redirectUrlComplete},children:(0,r.tZ)(p.TaskResetPassword,{})})}),(0,r.tZ)(Z.Route,{index:!0,children:(0,r.tZ)(m,{})})]})})}let k=(0,d.withCardStateProvider)(e=>{var t;let{redirectUrlComplete:s}=e,n=(0,i.cL)(),{navigate:d}=(0,Z.useRouter)(),u=(0,l.useRef)(null);return((0,l.useEffect)(()=>{var e,t,r;let i=null==(e=n.session)?void 0:e.currentTask;if(!i||(null==(t=n.session)?void 0:t.status)==="active")return void d(s);null==(r=n.telemetry)||r.record((0,o.Zg)("SessionTask",{task:i.key}))},[n,d,s]),null==(t=n.session)?void 0:t.currentTask)?(0,r.tZ)(h.Hs.Provider,{value:{redirectUrlComplete:s},children:(0,r.tZ)(v,{})}):(0,r.BX)(a.Z.Root,{sx:()=>{var e;return{minHeight:u?null==(e=u.current)?void 0:e.offsetHeight:void 0}},children:[(0,r.tZ)(a.Z.Content,{sx:()=>({flex:1}),children:(0,r.tZ)(c.I,{})}),(0,r.tZ)(a.Z.Footer,{})]})})},13678:function(e,t,s){s.r(t),s.d(t,{TaskResetPassword:()=>k}),s(65223);var r=s(73312),i=s(61869),o=s(11576),l=s(86988),n=s(64204),a=s(92418),d=s(2672),c=s(70431),u=s(92654),h=s(96352),Z=s(54264),w=s(88870),p=s(86842),m=s(36788),v=s(25135);let k=(0,o.withCoreSessionSwitchGuard)((0,v.U)((0,d.withCardStateProvider)(()=>{var e,t,s,v,k,f,g;let y=(0,i.cL)(),P=(0,d.useCardState)(),{userSettings:{passwordSettings:R}}=(0,o.useEnvironment)(),{t:C,locale:b}=(0,n.useLocalizations)(),{redirectUrlComplete:O}=(0,l.y2)(),{otherSessions:S}=(0,Z.j)({user:y.user}),{navigateAfterSignOut:z,navigateAfterMultiSessionSingleSignOutUrl:T}=(0,o.useSignOutContext)(),F=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:K}=(0,l.G)(),L=(0,m.Yp)("newPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,p.GM)(e,{t:C,locale:b,passwordSettings:R})}),x=(0,m.Yp)("confirmPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),B=(0,m.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,n.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:_,isPasswordMatch:A}=(0,h.p5)({passwordField:L,confirmPasswordField:x}),I=null!=(g=null==(t=y.user)||null==(e=t.primaryEmailAddress)?void 0:e.emailAddress)?g:null==(s=y.user)?void 0:s.username;return(0,r.tZ)(n.Flow.Root,{flow:"taskResetPassword",children:(0,r.tZ)(n.Flow.Part,{part:"resetPassword",children:(0,r.BX)(a.Z.Root,{children:[(0,r.BX)(a.Z.Content,{children:[(0,r.BX)(u.h.Root,{showLogo:!0,children:[(0,r.tZ)(u.h.Title,{localizationKey:(0,n.localizationKeys)("taskResetPassword.title")}),(0,r.tZ)(u.h.Subtitle,{localizationKey:(0,n.localizationKeys)("taskResetPassword.subtitle")})]}),(0,r.tZ)(a.Z.Alert,{children:P.error}),(0,r.tZ)(n.Col,{elementDescriptor:n.descriptors.main,gap:8,children:(0,r.BX)(c.l.Root,{onSubmit:()=>{P.runAsync(async()=>{if(y.user){L.clearFeedback(),x.clearFeedback();try{await F(y.user,[{newPassword:L.value,signOutOfOtherSessions:B.checked}]),await y.setActive({session:y.session,navigate:async e=>{let{session:t}=e;await (null==K?void 0:K({session:t,redirectUrlComplete:O}))}})}catch(e){return(0,w.S3)(e,[L,x],P.setError)}}})},onBlur:()=>{L.value&&_(x.value)},gap:8,children:[(0,r.BX)(n.Col,{gap:6,children:[(0,r.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(k=y.user)||null==(v=k.primaryEmailAddress)?void 0:v.emailAddress)||(null==(f=y.user)?void 0:f.username)||"",style:{display:"none"}}),(0,r.tZ)(c.l.ControlRow,{elementId:L.id,children:(0,r.tZ)(c.l.PasswordInput,{...L.props,isRequired:!0,minLength:6})}),(0,r.tZ)(c.l.ControlRow,{elementId:x.id,children:(0,r.tZ)(c.l.PasswordInput,{...x.props,onChange:e=>(e.target.value&&_(e.target.value),x.props.onChange(e))})}),(0,r.tZ)(c.l.ControlRow,{elementId:B.id,children:(0,r.tZ)(c.l.Checkbox,{...B.props})})]}),(0,r.tZ)(n.Col,{gap:3,children:(0,r.tZ)(c.l.SubmitButton,{isLoading:P.isLoading,isDisabled:!A,localizationKey:(0,n.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,r.tZ)(a.Z.Footer,{children:(0,r.BX)(a.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[I&&(0,r.tZ)(a.Z.ActionText,{truncate:!0,localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:I})}),(0,r.tZ)(a.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===S.length?null==y||y.signOut(z):null==y||y.signOut(T,{sessionId:null==(e=y.session)?void 0:e.id})},localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))}}]);