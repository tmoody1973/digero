"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["196"],{13678:function(e,t,s){s.r(t),s.d(t,{TaskResetPassword:()=>k}),s(65223);var i=s(73312),l=s(61869),n=s(11576),r=s(86988),a=s(64204),o=s(92418),d=s(2672),u=s(70431),c=s(92654),h=s(96352),p=s(54264),w=s(88870),m=s(86842),y=s(36788),g=s(25135);let k=(0,n.withCoreSessionSwitchGuard)((0,g.U)((0,d.withCardStateProvider)(()=>{var e,t,s,g,k,Z,v;let b=(0,l.cL)(),f=(0,d.useCardState)(),{userSettings:{passwordSettings:P}}=(0,n.useEnvironment)(),{t:C,locale:R}=(0,a.useLocalizations)(),{redirectUrlComplete:O}=(0,r.y2)(),{otherSessions:S}=(0,p.j)({user:b.user}),{navigateAfterSignOut:_,navigateAfterMultiSessionSingleSignOutUrl:z}=(0,n.useSignOutContext)(),K=(0,l.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:A}=(0,r.G)(),L=(0,y.Yp)("newPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,m.GM)(e,{t:C,locale:R,passwordSettings:P})}),I=(0,y.Yp)("confirmPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),T=(0,y.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,a.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:x,isPasswordMatch:B}=(0,h.p5)({passwordField:L,confirmPasswordField:I}),F=null!=(v=null==(t=b.user)||null==(e=t.primaryEmailAddress)?void 0:e.emailAddress)?v:null==(s=b.user)?void 0:s.username;return(0,i.tZ)(a.Flow.Root,{flow:"taskResetPassword",children:(0,i.tZ)(a.Flow.Part,{part:"resetPassword",children:(0,i.BX)(o.Z.Root,{children:[(0,i.BX)(o.Z.Content,{children:[(0,i.BX)(c.h.Root,{showLogo:!0,children:[(0,i.tZ)(c.h.Title,{localizationKey:(0,a.localizationKeys)("taskResetPassword.title")}),(0,i.tZ)(c.h.Subtitle,{localizationKey:(0,a.localizationKeys)("taskResetPassword.subtitle")})]}),(0,i.tZ)(o.Z.Alert,{children:f.error}),(0,i.tZ)(a.Col,{elementDescriptor:a.descriptors.main,gap:8,children:(0,i.BX)(u.l.Root,{onSubmit:()=>{f.runAsync(async()=>{if(b.user){L.clearFeedback(),I.clearFeedback();try{await K(b.user,[{newPassword:L.value,signOutOfOtherSessions:T.checked}]),await b.setActive({session:b.session,navigate:async e=>{let{session:t}=e;await (null==A?void 0:A({session:t,redirectUrlComplete:O}))}})}catch(e){return(0,w.S3)(e,[L,I],f.setError)}}})},onBlur:()=>{L.value&&x(I.value)},gap:8,children:[(0,i.BX)(a.Col,{gap:6,children:[(0,i.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(k=b.user)||null==(g=k.primaryEmailAddress)?void 0:g.emailAddress)||(null==(Z=b.user)?void 0:Z.username)||"",style:{display:"none"}}),(0,i.tZ)(u.l.ControlRow,{elementId:L.id,children:(0,i.tZ)(u.l.PasswordInput,{...L.props,isRequired:!0,minLength:6})}),(0,i.tZ)(u.l.ControlRow,{elementId:I.id,children:(0,i.tZ)(u.l.PasswordInput,{...I.props,onChange:e=>(e.target.value&&x(e.target.value),I.props.onChange(e))})}),(0,i.tZ)(u.l.ControlRow,{elementId:T.id,children:(0,i.tZ)(u.l.Checkbox,{...T.props})})]}),(0,i.tZ)(a.Col,{gap:3,children:(0,i.tZ)(u.l.SubmitButton,{isLoading:f.isLoading,isDisabled:!B,localizationKey:(0,a.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,i.tZ)(o.Z.Footer,{children:(0,i.BX)(o.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[F&&(0,i.tZ)(o.Z.ActionText,{truncate:!0,localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:F})}),(0,i.tZ)(o.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===S.length?null==b||b.signOut(_):null==b||b.signOut(z,{sessionId:null==(e=b.session)?void 0:e.id})},localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))},25135:function(e,t,s){s.d(t,{U:()=>r});var i=s(95274),l=s(96231),n=s(86988);let r=(e,t)=>{let s=e.displayName||e.name||"Component";e.displayName=s;let r=s=>{let r=(0,n.G)();return(0,l.me)(e,e=>{var s;return!(null==(s=e.session)?void 0:s.currentTask)||e.session.currentTask.key!==t&&!e.__internal_setActiveInProgress},e=>{var t;let{clerk:s}=e;return s.session?null!=(t=r.redirectUrlComplete)?t:s.buildAfterSignInUrl():s.buildSignInUrl()},i.q.cannotRenderComponentWhenTaskDoesNotExist)(s)};return r.displayName="withTaskGuard(".concat(s,")"),r}}}]);