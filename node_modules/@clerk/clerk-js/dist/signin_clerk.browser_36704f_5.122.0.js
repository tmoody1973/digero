"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["6722"],{7389:function(e,t,r){r.d(t,{v:()=>a});var n=r(73312),o=r(24562),i=r(64204);let a=e=>{let{onBackLinkClick:t}=e;return(0,n.tZ)(o._,{cardTitle:(0,i.localizationKeys)("signIn.alternativeMethods.getHelp.title"),cardSubtitle:(0,i.localizationKeys)("signIn.alternativeMethods.getHelp.content"),onBackLinkClick:t})}},16241:function(e,t,r){r.r(t),r.d(t,{SignIn:()=>e7,SignInModal:()=>e5});var n=r(73312),o=r(61869),i=r(69144),a=r(15112),s=r(23147),l=r(64204),c=r(5482),d=r(92418),u=r(2672),p=r(92654),h=r(19955),m=r(11576),g=r(24676);let f=(0,i.lazy)(()=>Promise.all([r.e("514"),r.e("3956"),r.e("1192"),r.e("9573"),r.e("569")]).then(r.bind(r,22382)).then(e=>({default:e.Web3SolanaWalletButtons}))),I=(0,s.Jh)((0,s.Hy)((0,u.withCardStateProvider)(()=>{let e=(0,o.cL)(),t=(0,u.useCardState)(),r=(0,g.useRouter)(),a=(0,m.useSignInContext)();return(0,n.tZ)(l.Flow.Part,{part:"chooseWallet",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.web3Solana.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.web3Solana.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:t.error}),(0,n.BX)(l.Flex,{direction:"col",gap:4,children:[(0,n.tZ)(i.Suspense,{fallback:(0,n.tZ)(l.Flex,{direction:"row",align:"center",justify:"center",sx:e=>({height:"100%",minHeight:e.sizes.$32}),children:(0,n.tZ)(l.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})}),children:(0,n.tZ)(f,{web3AuthCallback:({walletName:n})=>e.authenticateWithWeb3({customNavigate:r.navigate,redirectUrl:a.afterSignInUrl||"/",secondFactorUrl:"factor-two",signUpContinueUrl:a.isCombinedFlow?"create/continue":a.signUpContinueUrl,strategy:"web3_solana_signature",walletName:n}).catch(e=>(0,h.H)(e,t.setError))})}),(0,n.tZ)(c.h,{boxElementDescriptor:l.descriptors.backRow,linkElementDescriptor:l.descriptors.backLink,onClick:()=>{r.navigate("../")}})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})})));var S=r(96352),v=r(4511),C=r(7508),y=r(22073);let w=()=>Promise.all([r.e("1192"),r.e("9573"),r.e("1710")]).then(r.bind(r,73041)),_=(0,i.lazy)(()=>w().then(e=>({default:e.SignUpVerifyPhone}))),b=(0,i.lazy)(()=>w().then(e=>({default:e.SignUpVerifyEmail}))),Z=(0,i.lazy)(()=>w().then(e=>({default:e.SignUpStart}))),B=(0,i.lazy)(()=>w().then(e=>({default:e.SignUpSSOCallback}))),A=(0,i.lazy)(()=>w().then(e=>({default:e.SignUpContinue})));var k=r(70431),P=r(88870),U=r(86842),E=r(36788),z=r(24152),F=r(93234);let K=(0,u.withCardStateProvider)(()=>{let e=(0,m.useCoreSignIn)(),t=(0,u.useCardState)(),{navigate:r}=(0,g.useRouter)(),o=(0,F.H)(),{userSettings:{passwordSettings:a}}=(0,m.useEnvironment)(),{t:s,locale:c}=(0,l.useLocalizations)(),h="needs_new_password"===e.status&&"reset_password_email_code"!==e.firstFactorVerification.strategy&&"reset_password_phone_code"!==e.firstFactorVerification.strategy;i.useEffect(()=>{h&&t.setError(s((0,l.localizationKeys)("signIn.resetPassword.requiredMessage")))},[]);let f=(0,E.Yp)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,U.GM)(e,{t:s,locale:c,passwordSettings:a})}),I=(0,E.Yp)("confirmPassword","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),v=(0,E.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,l.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:C,isPasswordMatch:y}=(0,S.p5)({passwordField:f,confirmPasswordField:I}),w=async()=>{f.clearFeedback(),I.clearFeedback();try{let{status:t,createdSessionId:n}=await e.resetPassword({password:f.value,signOutOfOtherSessions:v.checked});switch(t){case"complete":if(n){let e=new URLSearchParams;return e.set("createdSessionId",n),r(`../reset-password-success?${e.toString()}`)}return console.error((0,z.Ws)(t,o));case"needs_second_factor":return r("../factor-two");default:return console.error((0,z.Ws)(t,o))}}catch(e){return(0,P.S3)(e,[f,I],t.setError)}};return(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.tZ)(p.h.Root,{showLogo:!0,children:(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.title")})}),(0,n.tZ)(d.Z.Alert,{children:t.error}),(0,n.tZ)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:(0,n.BX)(k.l.Root,{onSubmit:w,onBlur:()=>{f.value&&C(I.value)},gap:8,children:[(0,n.BX)(l.Col,{gap:6,children:[(0,n.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.identifier||"",style:{display:"none"}}),(0,n.tZ)(k.l.ControlRow,{elementId:f.id,children:(0,n.tZ)(k.l.PasswordInput,{...f.props,isRequired:!0,autoFocus:!0})}),(0,n.tZ)(k.l.ControlRow,{elementId:I.id,children:(0,n.tZ)(k.l.PasswordInput,{...I.props,onChange:e=>(e.target.value&&C(e.target.value),I.props.onChange(e))})}),!h&&(0,n.tZ)(k.l.ControlRow,{elementId:v.id,children:(0,n.tZ)(k.l.Checkbox,{...v.props})})]}),(0,n.BX)(l.Col,{gap:3,children:[(0,n.tZ)(k.l.SubmitButton,{isDisabled:!y,localizationKey:(0,l.localizationKeys)("signIn.resetPassword.formButtonPrimary")}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:(0,n.tZ)(d.Z.ActionLink,{elementDescriptor:l.descriptors.backLink,localizationKey:(0,l.localizationKeys)("backButton"),onClick:()=>r("../")})})]})]})})]}),(0,n.tZ)(d.Z.Footer,{})]})});var L=r(44875),R=r(30215);let T=(0,u.withCardStateProvider)(()=>{let e=(0,u.useCardState)();return(0,L.E)(),(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.tZ)(p.h.Root,{showLogo:!0,children:(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.title")})}),(0,n.tZ)(d.Z.Alert,{children:e.error}),(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:[(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.successMessage")}),(0,n.tZ)(R.kC,{direction:"row",center:!0,children:(0,n.tZ)(l.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})});var x=r(42305),M=r(48774),O=r(97295),D=r(96231),$=r(34174),N=r(49327),X=r(35241);let W=(0,D.Hy)((0,u.withCardStateProvider)(()=>{let e=(0,u.useCardState)(),{userProfileUrl:t}=(0,m.useEnvironment)().displayConfig,{afterSignInUrl:r,path:o,signInUrl:i,taskUrl:a}=(0,m.useSignInContext)(),{navigateAfterSignOut:s}=(0,m.useSignOutContext)(),{handleSignOutAllClicked:c,handleSessionClicked:h,signedInSessions:g,handleAddAccountClicked:f}=(0,X.Z)({taskUrl:a,navigateAfterSignOut:s,afterSwitchSessionUrl:r,userProfileUrl:t,signInUrl:o??i,user:void 0});return(0,n.tZ)(l.Flow.Part,{part:"accountSwitcher",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{sx:e=>({padding:`${e.space.$8} ${e.space.$none} ${e.space.$none}`}),children:[(0,n.BX)(p.h.Root,{children:[(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.accountSwitcher.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.accountSwitcher.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:e.error}),(0,n.tZ)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100}),children:(0,n.BX)(x.eX,{role:"menu",children:[g.map(e=>(0,n.tZ)(M.K,{onClick:h(e),sx:e=>({height:e.sizes.$16,justifyContent:"flex-start",borderRadius:0}),icon:$.nR,children:(0,n.tZ)(O.E,{user:e.user,sx:{width:"100%"}})},e.id)),(0,n.tZ)(x.aU,{elementDescriptor:l.descriptors.accountSwitcherActionButton,elementId:l.descriptors.accountSwitcherActionButton.setId("addAccount"),iconBoxElementDescriptor:l.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:l.descriptors.accountSwitcherActionButtonIconBox.setId("addAccount"),iconElementDescriptor:l.descriptors.accountSwitcherActionButtonIcon,iconElementId:l.descriptors.accountSwitcherActionButtonIcon.setId("addAccount"),icon:$.mm,label:(0,l.localizationKeys)("signIn.accountSwitcher.action__addAccount"),onClick:f,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})})]}),(0,n.tZ)(d.Z.Footer,{sx:e=>({">:first-of-type":{padding:`${e.space.$1}`,width:"100%"}}),children:(0,n.tZ)(d.Z.Action,{sx:{width:"100%",">:first-of-type":{width:"100%",borderBottomWidth:0}},children:(0,n.tZ)(N.gW,{handleSignOutAllClicked:c,elementDescriptor:l.descriptors.accountSwitcherActionButton,elementId:l.descriptors.accountSwitcherActionButton.setId("signOutAll"),iconBoxElementDescriptor:l.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:l.descriptors.accountSwitcherActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:l.descriptors.accountSwitcherActionButtonIcon,iconElementId:l.descriptors.accountSwitcherActionButtonIcon.setId("signOutAll"),label:(0,l.localizationKeys)("signIn.accountSwitcher.action__signOutAll"),actionSx:e=>({padding:`${e.space.$2} ${e.space.$2}`})})})})]})})}));var H=r(24562),V=r(21455),G=r(91752),j=r(17703),Y=r(38246),q=r(16735),J=r(44271),Q=r(41024),ee=r(80753),et=r(96565),er=r(56749),en=r(75747),eo=r(874);let ei=i.memo(e=>{let t=(0,o.cL)(),{navigate:r}=(0,g.useRouter)(),i=(0,u.useCardState)(),{displayConfig:a}=(0,en.O)(),s=(0,m.useSignInContext)(),l=(0,m.useCoreSignIn)(),c=(0,er.wT)(s,a.signInUrl),d=s.afterSignInUrl||"/",p="popup"===s.oauthFlow||"auto"===s.oauthFlow&&(0,et.t)(),{onAlternativePhoneCodeProviderClick:f,...I}=e,S=e=>(0,Q.kD)(e)&&e.errors.find(e=>e.code===ee.O1.SESSION_EXISTS)?t.setActive({session:t.client.lastActiveSessionId,navigate:async({session:e})=>{await s.navigateOnSetActive({session:e,redirectUrl:s.afterSignInUrl})}}):(0,P.S3)(e,[],i.setError);return(0,n.tZ)(eo.L,{...I,showLastAuthenticationStrategy:!0,idleAfterDelay:!p,oauthCallback:e=>{if(p){let t=window.open("about:blank","","width=600,height=800"),r=setInterval(()=>{(!t||t.closed)&&(clearInterval(r),i.setIdle())},500);return l.authenticateWithPopup({strategy:e,redirectUrl:c,redirectUrlComplete:d,popup:t,oidcPrompt:s.oidcPrompt}).catch(e=>S(e))}return l.authenticateWithRedirect({strategy:e,redirectUrl:c,redirectUrlComplete:d,oidcPrompt:s.oidcPrompt}).catch(e=>S(e))},web3Callback:e=>"web3_solana_signature"===e?r(`choose-wallet?strategy=${e}`):t.authenticateWithWeb3({customNavigate:r,redirectUrl:d,signUpContinueUrl:s.isCombinedFlow?"create/continue":s.signUpContinueUrl,strategy:e,secondFactorUrl:"factor-two"}).catch(e=>(0,h.H)(e,i.setError)),alternativePhoneCodeCallback:e=>{f?.(e)}})});var ea=r(95518);function es(){let e=(0,m.useCoreSignIn)();return e.supportedFirstFactors?.find(({strategy:e})=>(0,ea.Vh)(e))}var el=r(7389);let ec=e=>((e,t)=>{let[r,o]=i.useState(!1),a=i.useCallback(()=>o(e=>!e),[o]);return r?(0,n.tZ)(el.v,{onBackLinkClick:a}):(0,n.tZ)(e,{...t,onHavingTroubleClick:a})})(ed,{...e}),ed=e=>{let{onBackLinkClick:t,onHavingTroubleClick:r,onFactorSelected:o,mode:i="default"}=e,a=(0,u.useCardState)(),s=es(),{supportedFirstFactors:h}=(0,m.useCoreSignIn)(),{firstPartyFactors:g,hasAnyStrategy:f}=(0,G.l)({filterOutFactor:e?.currentFactor,supportedFirstFactors:h}),I=function(e){switch(e){case"forgot":return"forgotPasswordMethods";case"pwned":return"passwordPwnedMethods";case"passwordCompromised":return"passwordCompromisedMethods";default:return"alternativeMethods"}}(i),S=function(e){switch(e){case"forgot":return(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.title");case"pwned":return(0,l.localizationKeys)("signIn.passwordPwned.title");case"passwordCompromised":return(0,l.localizationKeys)("signIn.passwordCompromised.title");default:return(0,l.localizationKeys)("signIn.alternativeMethods.title")}}(i),v=function(e){switch(e){case"forgot":case"pwned":return!0;default:return!1}}(i);return(0,n.tZ)(l.Flow.Part,{part:I,children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:S}),!v&&"passwordCompromised"!==i&&(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:a.error}),(0,n.BX)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:6,children:[v&&s&&(0,n.tZ)(l.Button,{localizationKey:eu(s),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),o(s)}}),v&&f&&(0,n.tZ)(q.i,{dividerText:(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.label__alternativeMethods")}),(0,n.BX)(l.Col,{gap:4,children:[f&&(0,n.BX)(l.Flex,{elementDescriptor:l.descriptors.alternativeMethods,direction:"col",gap:2,children:[(0,n.tZ)(ei,{enableWeb3Providers:!0,enableOAuthProviders:!0,enableAlternativePhoneCodeProviders:!1}),g&&g.map((e,t)=>{var r;return(0,n.tZ)(Y.$,{leftIcon:(r=e,({email_link:$.xP,email_code:$.GT,phone_code:$.iU,reset_password_email_code:$.ds,reset_password_phone_code:$.ds,password:$.kh,passkey:$.IG})[r.strategy]),textLocalizationKey:eu(e),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,textElementDescriptor:l.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:l.descriptors.alternativeMethodsBlockButtonArrow,textVariant:"buttonLarge",isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),o(e)}},t)})]}),t&&(0,n.tZ)(c.h,{boxElementDescriptor:l.descriptors.backRow,linkElementDescriptor:l.descriptors.backLink,onClick:t})]})]})]}),(0,n.tZ)(d.Z.Footer,{children:(0,n.BX)(d.Z.Action,{elementId:"havingTrouble",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:r})]})})]})})};function eu(e){switch(e.strategy){case"email_link":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,J.H)(e.safeIdentifier)||""});case"email_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"phone_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"password":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__password");case"passkey":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__passkey");case"reset_password_email_code":case"reset_password_phone_code":return(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.blockButton__resetPassword");default:throw Error(`Invalid sign in strategy: "${e.strategy}"`)}}var ep=r(93367);function eh(e){let t=(0,u.useCardState)(),{setActive:r,__internal_navigateWithError:n}=(0,o.cL)(),a=(0,F.H)(),{afterSignInUrl:s,navigateOnSetActive:l}=(0,m.useSignInContext)(),{authenticateWithPasskey:c}=(0,m.useCoreSignIn)();return(0,i.useEffect)(()=>()=>{ep.YI.abort()},[]),(0,i.useCallback)(async(...o)=>{try{let t=await c(...o);switch(t.status){case"complete":return r({session:t.createdSessionId,navigate:async({session:e})=>{await l({session:e,redirectUrl:s})}});case"needs_second_factor":return e();default:return console.error((0,z.Ws)(t.status,a))}}catch(r){let{flow:e}=o[0]||{};if((0,Q.uX)(r)&&("passkey_operation_aborted"===r.code||"autofill"===e&&"passkey_retrieval_cancelled"===r.code))return;if((0,Q.ay)(r))return n("..",r.errors[0]);(0,P.S3)(r,[],t.setError)}},[])}function em(e){return!!e?.length&&e.filter(e=>"enterprise_sso"===e.strategy&&"enterpriseConnectionId"in e&&"enterpriseConnectionName"in e).length>1}var eg=r(90159),ef=r(23465);let eI=e=>{let t=(0,m.useCoreSignIn)(),r=(0,u.useCardState)(),{navigate:i}=(0,g.useRouter)(),{afterSignInUrl:a,navigateOnSetActive:s}=(0,m.useSignInContext)(),{setActive:l}=(0,o.cL)(),c=(0,F.H)(),d=(0,o.cL)(),p=e.factor.channel,h="verified"===t.firstFactorVerification.status&&e.factorAlreadyPrepared;return(0,n.tZ)(ef.U,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,n,o)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then(async e=>{switch(await n(),e.status){case"complete":return l({session:e.createdSessionId,navigate:async({session:e})=>{await s({session:e,redirectUrl:a})}});case"needs_second_factor":return i("../factor-two");case"needs_new_password":return i("../reset-password");default:return console.error((0,z.Ws)(e.status,c))}}).catch(e=>(0,Q.ay)(e)?d.__internal_navigateWithError("..",e.errors[0]):o(e))},onResendCodeClicked:()=>{h||t.prepareFirstFactor({...e.factor,channel:p}).then(()=>e.onFactorPrepare()).catch(e=>(0,P.S3)(e,[],r.setError))},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,alternativeMethodsLabel:(0,j.u1)("footerActionLink__alternativePhoneCodeProvider"),onShowAlternativeMethodsClicked:()=>{r.setError(void 0),e.onChangePhoneCodeChannel({...e.factor,channel:void 0})},showAlternativeMethods:!0,onIdentityPreviewEditClicked:()=>i("../"),onBackLinkClicked:e.onBackLinkClicked})},eS=e=>(0,n.tZ)(l.Flow.Part,{part:"phoneCode",children:(0,n.tZ)(eI,{...e,cardTitle:(0,l.localizationKeys)("signIn.alternativePhoneCodeProvider.title",{provider:(0,eg.H)(e.factor.channel)?.name||""}),cardSubtitle:(0,l.localizationKeys)("signIn.alternativePhoneCodeProvider.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.alternativePhoneCodeProvider.formTitle"),resendButton:(0,l.localizationKeys)("signIn.alternativePhoneCodeProvider.resendButton")})}),ev=e=>{let t=(0,m.useCoreSignIn)(),r=(0,u.useCardState)(),{navigate:a}=(0,g.useRouter)(),{afterSignInUrl:s,navigateOnSetActive:l}=(0,m.useSignInContext)(),{setActive:c}=(0,o.cL)(),d=(0,F.H)(),p=(0,o.cL)(),h="verified"===t.firstFactorVerification.status&&e.factorAlreadyPrepared,f=(0,i.useMemo)(()=>{let t=e.factor,r=t.strategy;return"emailAddressId"in t&&(r+=`_${t.emailAddressId}`),"phoneNumberId"in t&&(r+=`_${t.phoneNumberId}`),"channel"in t&&t.channel&&(r+=`_${t.channel}`),{name:"signIn.prepareFirstFactor",factorKey:r}},[e.factor.strategy,"emailAddressId"in e.factor?e.factor.emailAddressId:void 0,"phoneNumberId"in e.factor?e.factor.phoneNumberId:void 0,"channel"in e.factor?e.factor.channel:void 0]);return(0,S.ib)(h?void 0:()=>t?.prepareFirstFactor(e.factor),f,{staleTime:100,onSuccess:()=>e.onFactorPrepare(),onError:e=>(0,P.S3)(e,[],r.setError)}),(0,n.tZ)(ef.U,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,n,o)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then(async e=>{switch(await n(),e.status){case"complete":return c({session:e.createdSessionId,navigate:async({session:e})=>{await l({session:e,redirectUrl:s})}});case"needs_second_factor":return a("../factor-two");case"needs_new_password":return a("../reset-password");default:return console.error((0,z.Ws)(e.status,d))}}).catch(e=>(0,Q.ay)(e)?p.__internal_navigateWithError("..",e.errors[0]):o(e))},onResendCodeClicked:()=>{h||t.prepareFirstFactor(e.factor).then(()=>e.onFactorPrepare()).catch(e=>(0,P.S3)(e,[],r.setError))},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,showAlternativeMethods:e.showAlternativeMethods,onIdentityPreviewEditClicked:()=>a("../"),onBackLinkClicked:e.onBackLinkClicked})},eC=e=>(0,n.tZ)(l.Flow.Part,{part:"emailCode",children:(0,n.tZ)(ev,{...e,cardTitle:(0,l.localizationKeys)("signIn.emailCode.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailCode.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.emailCode.formTitle"),resendButton:(0,l.localizationKeys)("signIn.emailCode.resendButton")})});var ey=r(65495),ew=r(14814),e_=r(85117);let eb=e=>{let{t}=(0,l.useLocalizations)(),r=(0,u.useCardState)(),a=(0,m.useCoreSignIn)(),s=(0,m.useSignInContext)(),{signInUrl:c}=s,{navigate:d}=(0,e_.t)(),{afterSignInUrl:p}=(0,m.useSignInContext)(),{setActive:h}=(0,o.cL)(),{startEmailLinkFlow:g,cancelEmailLinkFlow:f}=(0,ew.E)(a),[I,S]=i.useState(!1),v=(0,o.cL)();i.useEffect(()=>{C()},[]);let C=()=>{g({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,er.Uu)({ctx:s,baseUrl:c,intent:"sign-in"})}).then(e=>y(e)).catch(e=>{if((0,Q.ay)(e))return v.__internal_navigateWithError("..",e.errors[0]);(0,P.S3)(e,[],r.setError)})},y=async e=>{let n=e.firstFactorVerification;"expired"===n.status?r.setError(t((0,l.localizationKeys)("formFieldError__verificationLinkExpired"))):n.verifiedFromTheSameClient()?S(!0):await w(e)},w=async e=>"complete"===e.status?h({session:e.createdSessionId,redirectUrl:p}):"needs_second_factor"===e.status?d("../factor-two"):void 0;return I?(0,n.tZ)(D.Ej,{title:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,n.tZ)(l.Flow.Part,{part:"emailLink",children:(0,n.tZ)(ey.J,{cardTitle:(0,l.localizationKeys)("signIn.emailLink.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailLink.subtitle"),formTitle:(0,l.localizationKeys)("signIn.emailLink.formTitle"),formSubtitle:(0,l.localizationKeys)("signIn.emailLink.formSubtitle"),resendButton:(0,l.localizationKeys)("signIn.emailLink.resendButton"),onResendCodeClicked:()=>{f(),C()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})};var eZ=r(71989);let eB=(0,u.withCardStateProvider)((e=>{let t=e.displayName||e.name||"Component";e.displayName=t;let r=t=>{let r=(0,m.useCoreSignIn)(),n=(0,m.useSignInContext)();return(0,D.me)(e,()=>!em(r.supportedFirstFactors),({clerk:e})=>n.signInUrl||e.buildSignInUrl(),"There are no enterprise connections available to sign-in. Clerk is redirecting to the `signInUrl` instead.")(t)};return r.displayName=`withEnterpriseConnectionsGuard(${t})`,r})(()=>{let e=(0,m.useSignInContext)(),{displayConfig:t}=(0,m.useEnvironment)(),r=(0,o.cL)().client.signIn;if(!em(r.supportedFirstFactors))return null;let i=r.supportedFirstFactors.map(e=>({id:e.enterpriseConnectionId,name:e.enterpriseConnectionName}));return(0,n.tZ)(l.Flow.Part,{part:"enterpriseConnections",children:(0,n.tZ)(eZ.c,{title:(0,l.localizationKeys)("signIn.enterpriseConnections.title"),subtitle:(0,l.localizationKeys)("signIn.enterpriseConnections.subtitle"),onClick:n=>{let o=(0,D.wT)(e,t.signInUrl),i=e.afterSignInUrl||"/";return r.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:o,redirectUrlComplete:i,oidcPrompt:e.oidcPrompt,continueSignIn:!0,enterpriseConnectionId:n})},enterpriseConnections:i})})})),eA=e=>(0,n.tZ)(l.Flow.Part,{part:"resetPassword",children:(0,n.tZ)(ev,{...e,showAlternativeMethods:!1,cardTitle:(0,l.localizationKeys)("signIn.forgotPassword.title"),inputLabel:(0,l.localizationKeys)("signIn.forgotPassword.formTitle"),resendButton:(0,l.localizationKeys)("signIn.forgotPassword.resendButton")})});var ek=r(384);let eP=e=>{let{onShowAlternativeMethodsClick:t}=e,r=(0,u.useCardState)(),o=(0,m.useCoreSignIn)(),{navigate:a}=(0,e_.t)(),[s,c]=i.useState(!1),h=i.useCallback(()=>c(e=>!e),[c]),g=eh(()=>a("../factor-two"));return s?(0,n.tZ)(el.v,{onBackLinkClick:h}):(0,n.tZ)(l.Flow.Part,{part:"password",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(l.Icon,{elementDescriptor:l.descriptors.passkeyIcon,icon:$.IG,sx:e=>({color:e.colors.$neutralAlpha500,marginInline:"auto",paddingBottom:e.sizes.$1,width:e.sizes.$12,height:e.sizes.$12})}),(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.passkey.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.passkey.subtitle")}),(0,n.tZ)(ek.m,{identifier:o.identifier,avatarUrl:o.userData.imageUrl,onClick:()=>a("../")})]}),(0,n.tZ)(d.Z.Alert,{children:r.error}),(0,n.BX)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:4,children:[(0,n.tZ)(k.l.Root,{onSubmit:e=>(e.preventDefault(),g()),gap:8,children:(0,n.tZ)(k.l.SubmitButton,{hasArrow:!0})}),(0,n.tZ)(d.Z.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)(t?"footerActionLink__useAnotherMethod":"signIn.alternativeMethods.actionLink"),onClick:t||h})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})},eU=e=>{let{onShowAlternativeMethodsClick:t,onPasswordError:r}=e,a=i.useRef(null),s=(0,u.useCardState)(),{setActive:c}=(0,o.cL)(),h=(0,m.useCoreSignIn)(),{afterSignInUrl:g,navigateOnSetActive:f}=(0,m.useSignInContext)(),I=(0,F.H)(),S=(e=>{let{onForgotPasswordMethodClick:t,onShowAlternativeMethodsClick:r}=e,n=es(),o=(0,E.Yp)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password")});return{...o,props:{...o.props,actionLabel:n||r?(0,l.localizationKeys)("formFieldAction__forgotPassword"):"",onActionClicked:t||r||(()=>null)}}})(e),{navigate:v}=(0,e_.t)(),[C,y]=i.useState(!1),w=i.useCallback(()=>y(e=>!e),[y]),_=(0,o.cL)();return C?(0,n.tZ)(el.v,{onBackLinkClick:w}):(0,n.tZ)(l.Flow.Part,{part:"password",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.password.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.password.subtitle")}),(0,n.tZ)(ek.m,{identifier:h.identifier,avatarUrl:h.userData.imageUrl,onClick:()=>{v("../")}})]}),(0,n.tZ)(d.Z.Alert,{children:s.error}),(0,n.BX)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:4,children:[(0,n.BX)(k.l.Root,{onSubmit:e=>{e.preventDefault(),h.attemptFirstFactor({strategy:"password",password:S.value}).then(e=>{switch(e.status){case"complete":return c({session:e.createdSessionId,navigate:({session:e})=>f({session:e,redirectUrl:g})});case"needs_second_factor":return v("../factor-two");default:return console.error((0,z.Ws)(e.status,I))}}).catch(e=>{if((0,Q.ay)(e))return _.__internal_navigateWithError("..",e.errors[0]);if(r){if((0,Q.UZ)(e)){s.setError({...e.errors[0],code:"form_password_pwned__sign_in"}),r("pwned");return}if((0,Q.Lx)(e)){s.setError({...e.errors[0],code:"form_password_compromised__sign_in"}),r("compromised");return}}(0,P.S3)(e,[S],s.setError),setTimeout(()=>a.current?.focus(),0)})},gap:8,children:[(0,n.tZ)("input",{readOnly:!0,id:"identifier-field",name:"identifier",value:h.identifier||"",style:{display:"none"}}),(0,n.tZ)(k.l.ControlRow,{elementId:S.id,children:(0,n.tZ)(k.l.PasswordInput,{...S.props,ref:a,autoFocus:!0})}),(0,n.tZ)(k.l.SubmitButton,{hasArrow:!0})]}),(0,n.tZ)(d.Z.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)(t?"signIn.password.actionLink":"signIn.alternativeMethods.actionLink"),onClick:t||w})})]})]}),(0,n.tZ)(d.Z.Footer,{})]})})},eE=e=>(0,n.tZ)(l.Flow.Part,{part:"phoneCode",children:(0,n.tZ)(ev,{...e,cardTitle:(0,l.localizationKeys)("signIn.phoneCode.title"),cardSubtitle:(0,l.localizationKeys)("signIn.phoneCode.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.phoneCode.formTitle"),resendButton:(0,l.localizationKeys)("signIn.phoneCode.resendButton")})}),ez=e=>{if(!e)return"";let t=e.strategy;return"emailAddressId"in e&&(t+=e.emailAddressId),"phoneNumberId"in e&&(t+=e.phoneNumberId),"channel"in e&&(t+=e.channel),t},eF=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){let{__internal_setActiveInProgress:e}=(0,o.cL)(),t=(0,m.useCoreSignIn)(),{preferredSignInStrategy:r}=(0,m.useEnvironment)().displayConfig,a=t.supportedFirstFactors,s=(0,g.useRouter)(),l=(0,u.useCardState)(),{supportedFirstFactors:c,firstFactorVerification:d}=(0,m.useCoreSignIn)(),p=i.useRef(""),[{currentFactor:h},f]=i.useState(()=>{let e=(0,ea.t3)(a,t.identifier,r);return e?.strategy==="phone_code"&&d.channel&&"sms"!==d.channel&&(e.channel=d.channel),{currentFactor:e,prevCurrentFactor:void 0}}),{hasAnyStrategy:I}=(0,G.l)({filterOutFactor:h,supportedFirstFactors:c}),[S,v]=i.useState(()=>!h||!(0,ea.xT)(h)),C=es(),[y,w]=i.useState(!1),[_,b]=i.useState(null);if(i.useEffect(()=>{e||("needs_identifier"===t.status||null===t.status)&&s.navigate("../")},[e]),!h)return t.status?(0,n.tZ)(H._,{cardTitle:(0,j.u1)("signIn.noAvailableMethods.title"),cardSubtitle:(0,j.u1)("signIn.noAvailableMethods.subtitle"),message:(0,j.u1)("signIn.noAvailableMethods.message")}):(0,n.tZ)(V.W,{});let Z=I?()=>v(e=>!e):void 0,B=()=>w(e=>!e),A=()=>{p.current=ez(h)},k=e=>{f(t=>({currentFactor:e,prevCurrentFactor:t.currentFactor}))};if(em(t.supportedFirstFactors))return(0,n.tZ)(eB,{});if(S||y){let e=(0,ea.xT)(h),t=S?Z:B;return(0,n.tZ)(ec,{mode:y?"pwned"===_?"pwned":"compromised"===_?"passwordCompromised":"forgot":"default",onBackLinkClick:e?()=>{l.setError(void 0),b(null),t?.()}:void 0,onFactorSelected:e=>{k(e),t?.()},currentFactor:h})}if(!h)return(0,n.tZ)(V.W,{});switch(h?.strategy){case"passkey":return(0,n.tZ)(eP,{onFactorPrepare:A,onShowAlternativeMethodsClick:Z});case"password":return(0,n.tZ)(eU,{onForgotPasswordMethodClick:C?B:Z,onShowAlternativeMethodsClick:Z,onPasswordError:e=>{b(e),B()}});case"email_code":return(0,n.tZ)(eC,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onShowAlternativeMethodsClicked:Z});case"phone_code":if(h.channel&&"sms"!==h.channel)return(0,n.tZ)(eS,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onChangePhoneCodeChannel:k});return(0,n.tZ)(eE,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onShowAlternativeMethodsClicked:Z});case"email_link":return(0,n.tZ)(eb,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onShowAlternativeMethodsClicked:Z});case"reset_password_phone_code":return(0,n.tZ)(eA,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onShowAlternativeMethodsClicked:Z,onBackLinkClicked:()=>{f(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),B()},cardSubtitle:(0,j.u1)("signIn.forgotPassword.subtitle_phone")});case"reset_password_email_code":return(0,n.tZ)(eA,{factorAlreadyPrepared:p.current===ez(h),onFactorPrepare:A,factor:h,onShowAlternativeMethodsClicked:Z,onBackLinkClicked:()=>{f(e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor})),B()},cardSubtitle:(0,j.u1)("signIn.forgotPassword.subtitle_email")});default:return(0,n.tZ)(V.W,{})}})));var eK=r(90577);let eL=e=>{let[t,r]=i.useState(!1),o=i.useCallback(()=>r(e=>!e),[r]);return t?(0,n.tZ)(el.v,{onBackLinkClick:o}):(0,n.tZ)(eR,{onBackLinkClick:e.onBackLinkClick,onFactorSelected:e.onFactorSelected,onHavingTroubleClick:o})},eR=e=>{let{onHavingTroubleClick:t,onFactorSelected:r,onBackLinkClick:o}=e,i=(0,u.useCardState)(),{supportedSecondFactors:a}=(0,m.useCoreSignIn)();return(0,n.tZ)(l.Flow.Part,{part:"alternativeMethods",children:(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:i.error}),(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.main,gap:3,children:[(0,n.tZ)(l.Col,{gap:2,children:a&&a.sort(eK.Q0).map((e,t)=>(0,n.tZ)(Y.$,{textLocalizationKey:function(e){switch(e.strategy){case"phone_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"totp":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__totp");case"backup_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__backupCode");case"email_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,J.H)(e.safeIdentifier)||""});case"email_link":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,J.H)(e.safeIdentifier)||""});default:throw Error(`Invalid sign in strategy: "${e.strategy}"`)}}(e),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,textElementDescriptor:l.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:l.descriptors.alternativeMethodsBlockButtonArrow,isDisabled:i.isLoading,onClick:()=>r(e)},t))}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:o&&(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("backButton"),onClick:e.onBackLinkClick})})]})]}),(0,n.tZ)(d.Z.Footer,{children:(0,n.BX)(d.Z.Action,{elementId:"havingTrouble",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:t})]})})]})})},eT=e=>{let{onShowAlternativeMethodsClicked:t}=e,r=(0,m.useCoreSignIn)(),{afterSignInUrl:i,navigateOnSetActive:a}=(0,m.useSignInContext)(),{setActive:s}=(0,o.cL)(),{navigate:c}=(0,g.useRouter)(),h=(0,F.H)(),f=(0,u.useCardState)(),I=(0,E.Yp)("code","",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__backupCode"),isRequired:!0}),S=(0,o.cL)(),v=e=>(0,ea.Vh)(e.firstFactorVerification?.strategy)&&e.firstFactorVerification?.status==="verified";return(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.backupCodeMfa.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:v(r)?(0,l.localizationKeys)("signIn.forgotPassword.subtitle"):(0,l.localizationKeys)("signIn.backupCodeMfa.subtitle")})]}),(0,n.tZ)(d.Z.Alert,{children:f.error}),(0,n.tZ)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:(0,n.BX)(k.l.Root,{onSubmit:e=>(e.preventDefault(),r.attemptSecondFactor({strategy:"backup_code",code:I.value}).then(e=>{if("complete"!==e.status)return console.error((0,z.Ws)(e.status,h));if(v(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),c(`../reset-password-success?${t.toString()}`)}return s({session:e.createdSessionId,navigate:async({session:e})=>{await a({session:e,redirectUrl:i})}})}).catch(e=>{if((0,Q.ay)(e))return S.__internal_navigateWithError("..",e.errors[0]);(0,P.S3)(e,[I],f.setError)})),children:[(0,n.tZ)(k.l.ControlRow,{elementId:I.id,children:(0,n.tZ)(k.l.PlainInput,{...I.props,autoFocus:!0,onActionClicked:t})}),(0,n.BX)(l.Col,{gap:3,children:[(0,n.tZ)(k.l.SubmitButton,{hasArrow:!0}),(0,n.tZ)(d.Z.Action,{elementId:"alternativeMethods",children:t&&(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("footerActionLink__useAnotherMethod"),onClick:t})})]})]})})]}),(0,n.tZ)(d.Z.Footer,{})]})},ex=e=>(0,ea.Vh)(e.firstFactorVerification?.strategy)&&e.firstFactorVerification?.status==="verified",eM=e=>{let t=(0,m.useEnvironment)(),r=(0,m.useCoreSignIn)(),a=(0,u.useCardState)(),{afterSignInUrl:s,navigateOnSetActive:c}=(0,m.useSignInContext)(),{setActive:d}=(0,o.cL)(),{navigate:p}=(0,g.useRouter)(),h=(0,F.H)(),f=(0,o.cL)(),I=(0,i.useMemo)(()=>{let e=Object.values(t.userSettings.attributes).some(e=>e.used_for_second_factor);return"new"===r.clientTrustState&&!e},[r.clientTrustState,t.userSettings.attributes]);i.useEffect(()=>{e.factorAlreadyPrepared||S?.()},[]);let S=e.prepare?()=>e.prepare?.().then(()=>e.onFactorPrepare()).catch(e=>{if((0,Q.ay)(e))return f.__internal_navigateWithError("..",e.errors[0]);(0,P.S3)(e,[],a.setError)}):void 0;return(0,n.tZ)(ef.U,{cardTitle:e.cardTitle,cardSubtitle:ex(r)?(0,l.localizationKeys)("signIn.forgotPassword.subtitle"):e.cardSubtitle,cardNotice:I?(0,l.localizationKeys)("signIn.newDeviceVerificationNotice"):void 0,resendButton:e.resendButton,inputLabel:e.inputLabel,onCodeEntryFinishedAction:(t,n,o)=>{r.attemptSecondFactor({strategy:e.factor.strategy,code:t}).then(async e=>{if(await n(),"complete"!==e.status)return console.error((0,z.Ws)(e.status,h));if(ex(e)&&e.createdSessionId){let t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),p(`../reset-password-success?${t.toString()}`)}return d({session:e.createdSessionId,navigate:async({session:e})=>{await c({session:e,redirectUrl:s})}})}).catch(e=>(0,Q.ay)(e)?f.__internal_navigateWithError("..",e.errors[0]):o(e))},onResendCodeClicked:S,safeIdentifier:"safeIdentifier"in e.factor?e.factor.safeIdentifier:void 0,profileImageUrl:r.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,children:ex(r)&&(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("signIn.resetPasswordMfa.detailsLabel"),colorScheme:"secondary"})})},eO=e=>{let t=(0,m.useCoreSignIn)();return(0,n.tZ)(l.Flow.Part,{part:"emailCode2Fa",children:(0,n.tZ)(eM,{...e,cardTitle:(0,l.localizationKeys)("signIn.emailCodeMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailCodeMfa.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.emailCodeMfa.formTitle"),resendButton:(0,l.localizationKeys)("signIn.emailCodeMfa.resendButton"),prepare:()=>{let{emailAddressId:r,strategy:n}=e.factor;return t.prepareSecondFactor({emailAddressId:r,strategy:n})}})})},eD=e=>{let{t}=(0,l.useLocalizations)(),r=(0,u.useCardState)(),a=(0,m.useCoreSignIn)(),s=(0,m.useSignInContext)(),{signInUrl:c}=s,{afterSignInUrl:d}=(0,m.useSignInContext)(),{setActive:p}=(0,o.cL)(),{startEmailLinkFlow:h,cancelEmailLinkFlow:g}=(0,ew.E)(a),[f,I]=i.useState(!1),S=(0,o.cL)();i.useEffect(()=>{v()},[]);let v=()=>{h({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,er.Uu)({ctx:s,baseUrl:c,intent:"sign-in"})}).then(e=>C(e)).catch(e=>{if((0,Q.ay)(e))return S.__internal_navigateWithError("..",e.errors[0]);(0,P.S3)(e,[],r.setError)})},C=async e=>{let n=e.secondFactorVerification;"expired"===n.status?r.setError(t((0,l.localizationKeys)("formFieldError__verificationLinkExpired"))):n.verifiedFromTheSameClient()?I(!0):await p({session:e.createdSessionId,redirectUrl:d})};return f?(0,n.tZ)(D.Ej,{title:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,n.tZ)(l.Flow.Part,{part:"emailLink",children:(0,n.tZ)(ey.J,{cardTitle:(0,l.localizationKeys)("signIn.emailLinkMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailLinkMfa.subtitle"),cardNotice:"new"===a.clientTrustState?(0,l.localizationKeys)("signIn.newDeviceVerificationNotice"):void 0,formSubtitle:(0,l.localizationKeys)("signIn.emailLinkMfa.formSubtitle"),resendButton:(0,l.localizationKeys)("signIn.emailLinkMfa.resendButton"),onResendCodeClicked:()=>{g(),v()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})},e$=e=>{let t=(0,m.useCoreSignIn)();return(0,n.tZ)(l.Flow.Part,{part:"phoneCode2Fa",children:(0,n.tZ)(eM,{...e,cardTitle:(0,l.localizationKeys)("signIn.phoneCodeMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.phoneCodeMfa.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.phoneCodeMfa.formTitle"),resendButton:(0,l.localizationKeys)("signIn.phoneCodeMfa.resendButton"),prepare:()=>{let{phoneNumberId:r,strategy:n}=e.factor;return t.prepareSecondFactor({phoneNumberId:r,strategy:n})}})})},eN=e=>(0,n.tZ)(l.Flow.Part,{part:"totp2Fa",children:(0,n.tZ)(eM,{...e,cardTitle:(0,l.localizationKeys)("signIn.totpMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.totpMfa.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.totpMfa.formTitle")})}),eX=e=>{if(!e)return"";let t=e.strategy;return"phoneNumberId"in e&&(t+=e.phoneNumberId),t},eW=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){let e=(0,m.useCoreSignIn)().supportedSecondFactors,t=i.useRef(""),[r,o]=i.useState(()=>(0,ea.bx)(e)),[a,s]=i.useState(!r),l=()=>s(e=>!e),c=()=>{t.current=eX(r)};if(!r)return(0,n.tZ)(V.W,{});if(a)return(0,n.tZ)(eL,{onBackLinkClick:l,onFactorSelected:e=>{o(e),l()}});let d=t.current===eX(r);switch(r?.strategy){case"phone_code":return(0,n.tZ)(e$,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:l});case"totp":return(0,n.tZ)(eN,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:l});case"backup_code":return(0,n.tZ)(eT,{onShowAlternativeMethodsClicked:l});case"email_code":return(0,n.tZ)(eO,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:l});case"email_link":return(0,n.tZ)(eD,{factorAlreadyPrepared:d,onFactorPrepare:c,factor:r,onShowAlternativeMethodsClicked:l});default:return(0,n.tZ)(V.W,{})}}))),eH=(0,D.Jh)((0,D.Hy)(D.L));var eV=r(20645),eG=r(18350),ej=r(53621),eY=r(63872),eq=r(37321),eJ=r(87172);let eQ=e=>{let{handleSubmit:t,phoneNumberFormState:r,onUseAnotherMethod:o,phoneCodeProvider:i}=e,{providerToDisplayData:a,strategyToDisplayData:s}=(0,S.vO)(),c=i.name,h=i.channel,m=(0,u.useCardState)();return(0,n.tZ)(d.Z.Root,{children:(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,showDivider:!0,children:[(0,n.tZ)(l.Col,{center:!0,children:(0,n.tZ)(l.Image,{src:a[h]?.iconUrl,alt:`${s[h].name} logo`,sx:e=>({width:e.sizes.$7,height:e.sizes.$7,maxWidth:"100%",marginBottom:e.sizes.$6})})}),(0,n.tZ)(p.h.Title,{localizationKey:(0,l.localizationKeys)("signIn.start.alternativePhoneCodeProvider.title",{provider:c})}),(0,n.tZ)(p.h.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.start.alternativePhoneCodeProvider.subtitle",{provider:c})})]}),(0,n.tZ)(d.Z.Alert,{children:m.error}),(0,n.tZ)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:6,children:(0,n.BX)(k.l.Root,{onSubmit:t,gap:8,children:[(0,n.tZ)(l.Col,{gap:6,children:(0,n.tZ)(k.l.ControlRow,{elementId:"phoneNumber",children:(0,n.tZ)(k.l.PhoneInput,{...r.props,label:(0,l.localizationKeys)("signIn.start.alternativePhoneCodeProvider.label",{provider:c}),isRequired:!0,isOptional:!1,actionLabel:void 0,onActionClicked:void 0})})}),(0,n.BX)(l.Col,{center:!0,children:[(0,n.tZ)(eq.S,{}),(0,n.tZ)(l.Col,{gap:6,sx:{width:"100%"},children:(0,n.tZ)(k.l.SubmitButton,{hasArrow:!0,localizationKey:(0,l.localizationKeys)("formButtonPrimary")})})]}),(0,n.tZ)(l.Col,{center:!0,children:(0,n.tZ)(l.Button,{variant:"link",colorScheme:"neutral",onClick:o,localizationKey:(0,l.localizationKeys)("signIn.start.alternativePhoneCodeProvider.actionLink")})})]})})]})})},e0=e=>!!e.supportedFirstFactors?.length&&e.supportedFirstFactors.every(e=>"enterprise_sso"===e.strategy),e1=({field:e})=>{let[t,r]=(0,i.useState)(!1),o=(0,i.useRef)(null),a=!!(t||e?.value);return((0,i.useLayoutEffect)(()=>{let e=setInterval(()=>{if(o?.current){let t="onAutoFillStart"===window.getComputedStyle(o.current,":autofill").animationName||!!o.current?.matches("*:-webkit-autofill");t&&(r(t),clearInterval(e))}},500);return()=>{clearInterval(e)}},[]),(0,i.useEffect)(()=>{e?.value&&""!==e.value&&r(!1)},[e?.value]),e)?(0,n.tZ)(k.l.ControlRow,{elementId:e.id,sx:a?void 0:{position:"absolute",opacity:0,height:0,pointerEvents:"none",marginTop:"-1rem"},children:(0,n.tZ)(k.l.PasswordInput,{...e.props,ref:o,tabIndex:a?void 0:-1})}):null},e2=(0,D.Jh)((0,D.Hy)((0,u.withCardStateProvider)(function(){let e=(0,u.useCardState)(),t=(0,o.cL)(),a=(0,S._m)(),{displayConfig:s,userSettings:c,authConfig:h}=(0,m.useEnvironment)(),f=(0,m.useCoreSignIn)(),{navigate:I}=(0,g.useRouter)(),v=(0,m.useSignInContext)(),{afterSignInUrl:C,signUpUrl:y,waitlistUrl:w,isCombinedFlow:_,navigateOnSetActive:b}=v,Z=(0,F.H)(),B=(0,eJ.o)(),A=(0,i.useMemo)(()=>(0,D.vX)(c.enabledFirstFactorIdentifiers),[c.enabledFirstFactorIdentifiers]),U=c.alternativePhoneCodeChannels,{isWebAuthnAutofillSupported:K}=(()=>{let[e,t]=(0,i.useState)(!1),{navigate:r}=(0,g.useRouter)(),n=eh(()=>r("factor-two")),{userSettings:o}=(0,m.useEnvironment)(),{passkeySettings:a,attributes:s}=o;return(0,i.useEffect)(()=>{async function e(){let e=await (0,eV.h_)();t(e),e&&await n({flow:"autofill"})}a.allow_autofill&&s.passkey?.enabled&&e()},[]),{isWebAuthnAutofillSupported:e}})(),L=eh(()=>I("factor-two")),R=(0,eV.iW)(),T=!!v.initialValues?.phoneNumber&&!(v.initialValues.emailAddress||v.initialValues.username)&&A.includes("phone_number"),[x,M]=(0,i.useState)(T?"phone_number":A[0]||""),[O,$]=(0,i.useState)(!1),N=(0,eY.XV)("__clerk_ticket")||"",X=(0,eY.XV)("__clerk_status")||"",W=c.enabledFirstFactorIdentifiers,H=c.web3FirstFactors,G=c.authenticatableSocialStrategies,j=c.instanceIsPasswordBased,{currentIdentifier:Y,nextIdentifier:q}=(0,D.vO)(A,x),J=(0,E.Yp)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password")}),[Q,et]=(0,i.useState)(null),er=c.alternativePhoneCodeChannels.length>0,en=v.initialValues||{},eo=(0,i.useMemo)(()=>({email_address:en.emailAddress,email_address_username:en.emailAddress||en.username,username:en.username,phone_number:en.phoneNumber}),[v.initialValues]),es=!!G.length||!!H.length||!!U.length,[el,ec]=(0,i.useState)(!(0,ej.s)()&&!es),ed=(0,E.Yp)("identifier",eo[x]||"",{...Y,isRequired:!0,transformer:e=>e.trim()}),eu=(0,E.Yp)("identifier",eo.phone_number||"",{...Y,isRequired:!0}),ep="phone_number"===x?eu:ed;(0,i.useLayoutEffect)(()=>{if(ep.value.startsWith("+")&&A.includes("phone_number")&&"phone_number"!==x&&!O){var e;e=ep.value,ed.setValue(eo[x]||""),eu.setValue(e),M("phone_number"),ec(!0),$(!0)}},[ep.value,A]),(0,i.useEffect)(()=>{if(N){if("sign_up"===X){let e=new URLSearchParams;N&&e.set("__clerk_ticket",N),I(_?"create":y,{searchParams:e});return}a.setLoading(),e.setLoading(),f.create({strategy:"ticket",ticket:N}).then(e=>{switch(e.status){case"needs_first_factor":if(!e0(e)||em(e.supportedFirstFactors))return I("factor-one");return eI();case"needs_second_factor":return I("factor-two");case"complete":return(0,eY.xy)("__clerk_ticket"),t.setActive({session:e.createdSessionId,navigate:async({session:e})=>{await b({session:e,redirectUrl:C})}});default:return void console.error((0,z.Ws)(e.status,Z))}}).catch(e=>eS(e)).finally(()=>{e0(f)||(a.setIdle(),e.setIdle())})}},[]),(0,i.useEffect)(()=>{!async function(){let t=f?.firstFactorVerification?.error;if(t){switch(t.code){case ee.O1.NOT_ALLOWED_TO_SIGN_UP:case ee.O1.OAUTH_ACCESS_DENIED:case ee.O1.NOT_ALLOWED_ACCESS:case ee.O1.SAML_USER_ATTRIBUTE_MISSING:case ee.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case ee.O1.USER_LOCKED:case ee.O1.EXTERNAL_ACCOUNT_NOT_FOUND:case ee.O1.SIGN_UP_MODE_RESTRICTED:case ee.O1.SIGN_UP_MODE_RESTRICTED_WAITLIST:case ee.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case ee.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ee.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case ee.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case ee.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:case ee.O1.CAPTCHA_INVALID:case ee.O1.FRAUD_DEVICE_BLOCKED:case ee.O1.FRAUD_ACTION_BLOCKED:case ee.O1.SIGNUP_RATE_LIMIT_EXCEEDED:case ee.O1.USER_BANNED:e.setError(t);break;default:e.setError("Unable to complete action at this time. If the problem persists please contact support.")}await f.create({})}}()},[]);let ef=async(...e)=>{let r=Q?.channel||(0,ea.Vs)(e,h.preferredChannels,"identifier");if(r){let t=()=>{};e.push({id:"strategy",value:"phone_code",clearFeedback:t,setValue:t,onChange:t,setError:t}),e.push({id:"channel",value:r,clearFeedback:t,setValue:t,onChange:t,setError:t})}try{let r,n=await (r=f.create((e=>{let t=e.some(e=>"password"===e.name&&!!e.value);return(!t||c.enterpriseSSO.enabled)&&(e=e.filter(e=>"password"!==e.name)),{...(0,E.ni)(e),...t&&!c.enterpriseSSO.enabled&&{strategy:"password"}}})(e)),r.then(t=>{if(!c.enterpriseSSO.enabled)return t;let r=e.find(e=>"password"===e.name)?.value;return!r||t.supportedFirstFactors?.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy)?t:t.attemptFirstFactor({strategy:"password",password:r})}));switch(n.status){case"needs_identifier":n.supportedFirstFactors?.some(e=>"saml"===e.strategy||"enterprise_sso"===e.strategy)&&await eI();break;case"needs_first_factor":if(!e0(n)||em(n.supportedFirstFactors))return I("factor-one");return eI();case"needs_second_factor":return I("factor-two");case"complete":return t.setActive({session:n.createdSessionId,navigate:async({session:e})=>{await b({session:e,redirectUrl:C})}});default:return void console.error((0,z.Ws)(n.status,Z))}}catch(e){return eS(e)}},eI=async()=>{let e=(0,D.wT)(v,s.signInUrl),t=v.afterSignInUrl||"/";return f.authenticateWithRedirect({strategy:"enterprise_sso",redirectUrl:e,redirectUrlComplete:t,oidcPrompt:v.oidcPrompt,continueSignIn:!0})},eS=async n=>{if(!n.errors)return;let o=n.errors.find(e=>e.code===ee.O1.INVALID_STRATEGY_FOR_USER||e.code===ee.O1.FORM_PASSWORD_INCORRECT||e.code===ee.O1.FORM_PASSWORD_PWNED),i=n.errors.find(e=>e.code===ee.O1.SESSION_EXISTS),a=n.errors.find(e=>"identifier_already_signed_in"===e.code),l=n.errors.find(e=>e.code===ee.O1.INVITATION_ACCOUNT_NOT_EXISTS||e.code===ee.O1.FORM_IDENTIFIER_NOT_FOUND);if(o)await ef(ep);else if(i)await t.setActive({session:t.client.lastActiveSessionId,navigate:async({session:e})=>{await b({session:e,redirectUrl:C})}});else if(a){let e=a.meta.sessionId;await t.setActive({session:e,navigate:async({session:e})=>{await b({session:e,redirectUrl:C})}})}else if(_&&l){let n=(0,ea.s2)(ep);if(c.signUp.mode===ee.ci.WAITLIST)return I(t.buildWaitlistUrl("emailAddress"===n?{initialValues:{[n]:ep.value}}:{}));t.client.signUp[n]=ep.value;let o=(0,D.wT)(v,s.signUpUrl),i=v.afterSignUpUrl||"/";return function({identifierAttribute:e,identifierValue:t,signUpMode:n,navigate:o,organizationTicket:i,afterSignUpUrl:a,clerk:s,handleError:l,redirectUrl:c,redirectUrlComplete:d,passwordEnabled:u,navigateOnSetActive:p,alternativePhoneCodeChannel:h,unsafeMetadata:m}){var g,f;if(n===ee.ci.WAITLIST)return o(s.buildWaitlistUrl("emailAddress"===e?{initialValues:{[e]:t}}:{}));s.client.signUp[e]=t;let I=new URLSearchParams;return(i&&I.set("__clerk_ticket",i),u||(g=s.client.signUp,f=e,g.optionalFields.filter(e=>!(e.startsWith("oauth_")||e.startsWith("web3_")||["enterprise_sso","saml"].includes(e))&&"password"!==e&&("phoneNumber"!==f||"phone_number"!==e)).length>0)||"emailAddress"!==e&&"phoneNumber"!==e)?o("create",{searchParams:I}):s.client.signUp.create({[e]:t,...h?{strategy:"phone_code",channel:h}:{},unsafeMetadata:m}).then(async e=>(await Promise.all([r.e("1192"),r.e("9573"),r.e("1710")]).then(r.bind(r,46052)).then(e=>e.completeSignUpFlow))({signUp:e,verifyEmailPath:"create/verify-email-address",verifyPhonePath:"create/verify-phone-number",handleComplete:()=>s.setActive({session:e.createdSessionId,navigate:async({session:e})=>{await p({session:e,redirectUrl:a})}}),navigate:o,redirectUrl:c,redirectUrlComplete:d})).catch(e=>l(e))}({afterSignUpUrl:v.afterSignUpUrl||"/",clerk:t,handleError:t=>(0,P.S3)(t,[ep,J],e.setError),identifierAttribute:n,identifierValue:ep.value,navigate:I,organizationTicket:N,signUpMode:c.signUp.mode,redirectUrl:o,redirectUrlComplete:i,navigateOnSetActive:b,passwordEnabled:c.attributes.password?.required??!1,alternativePhoneCodeChannel:Q?.channel||(0,ea.mQ)(h.preferredChannels,n,ep.value),unsafeMetadata:v.unsafeMetadata})}else(0,P.S3)(n,[ep,J],e.setError)},ev=async e=>(e.preventDefault(),ef(ep,J)),eC=(0,i.useMemo)(()=>({tel:k.l.PhoneInput,password:k.l.PasswordInput,text:k.l.PlainInput,email:k.l.PlainInput})[ep.type],[ep.type]);if(a.isLoading||"sign_up"===X)return(0,n.tZ)(V.W,{});let{action:ey,validLastAuthenticationStrategies:ew,...e_}=ep.props,eb=t.client?.lastAuthenticationStrategy,eZ=!!eb&&B>1&&ew?.has(eb);return(0,n.tZ)(l.Flow.Part,{part:"start",children:Q?(0,n.tZ)(eQ,{handleSubmit:ev,phoneNumberFormState:eu,onUseAnotherMethod:()=>{et(null)},phoneCodeProvider:Q}):(0,n.BX)(d.Z.Root,{children:[(0,n.BX)(d.Z.Content,{children:[(0,n.BX)(p.h.Root,{showLogo:!0,children:[(0,n.tZ)(p.h.Title,{localizationKey:_?(0,l.localizationKeys)("signIn.start.titleCombined"):(0,l.localizationKeys)("signIn.start.title")}),(0,n.tZ)(p.h.Subtitle,{localizationKey:_?(0,l.localizationKeys)("signIn.start.subtitleCombined"):(0,l.localizationKeys)("signIn.start.subtitle"),sx:{"&:empty":{display:"none"}}})]}),(0,n.tZ)(d.Z.Alert,{children:e.error}),(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.main,gap:6,children:[(0,n.BX)(eG.G,{children:[es&&(0,n.tZ)(ei,{enableWeb3Providers:!0,enableOAuthProviders:!0,enableAlternativePhoneCodeProviders:er,onAlternativePhoneCodeProviderClick:e=>{et((0,eg.H)(e)||null)}}),W.length?(0,n.BX)(k.l.Root,{onSubmit:ev,gap:8,children:[(0,n.BX)(l.Col,{gap:6,children:[(0,n.tZ)(k.l.ControlRow,{elementId:ep.id,children:(0,n.tZ)(eC,{actionLabel:q?.action,onActionClicked:()=>{M(e=>A[(A.indexOf(e)+1)%A.length]),ec(!0),$(!1)},...e_,autoFocus:el,autoComplete:K?"webauthn":void 0,isLastAuthenticationStrategy:eZ})}),(0,n.tZ)(e1,{field:j?J:void 0})]}),(0,n.BX)(l.Col,{center:!0,children:[(0,n.tZ)(eq.S,{}),(0,n.tZ)(k.l.SubmitButton,{hasArrow:!0})]})]}):null]}),!W.length&&(0,n.tZ)(eq.S,{}),c.attributes.passkey?.enabled&&c.passkeySettings.show_sign_in_button&&R&&(0,n.tZ)(d.Z.Action,{elementId:"usePasskey",children:(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.start.actionLink__use_passkey"),onClick:()=>L({flow:"discoverable"})})})]})]}),(0,n.BX)(d.Z.Footer,{children:[c.signUp.mode===ee.ci.PUBLIC&&!_&&(0,n.BX)(d.Z.Action,{elementId:"signIn",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.start.actionText")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.start.actionLink"),to:t.buildUrlWithAuth(y)})]}),c.signUp.mode===ee.ci.WAITLIST&&(0,n.BX)(d.Z.Action,{elementId:"signIn",children:[(0,n.tZ)(d.Z.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.start.actionText__join_waitlist")}),(0,n.tZ)(d.Z.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.start.actionLink__join_waitlist"),to:t.buildUrlWithAuth(w)})]})]})]})})})));function e3(){let e=(0,o.cL)();return i.useEffect(()=>{e.redirectToSignIn()},[e]),null}function e4(){let e=(0,m.useSignInContext)(),t=(0,m.useSignUpContext)();return(0,n.tZ)(l.Flow.Root,{flow:"signIn",children:(0,n.BX)(g.Switch,{children:[(0,n.tZ)(g.Route,{path:"factor-one",children:(0,n.tZ)(eF,{})}),(0,n.tZ)(g.Route,{path:"factor-two",children:(0,n.tZ)(eW,{})}),(0,n.tZ)(g.Route,{path:"reset-password",children:(0,n.tZ)(K,{})}),(0,n.tZ)(g.Route,{path:"reset-password-success",children:(0,n.tZ)(T,{})}),(0,n.tZ)(g.Route,{path:"sso-callback",children:(0,n.tZ)(eH,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signInForceRedirectUrl:e.afterSignInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,continueSignUpUrl:e.signUpContinueUrl,transferable:e.transferable,firstFactorUrl:"../factor-one",secondFactorUrl:"../factor-two",resetPasswordUrl:"../reset-password",unsafeMetadata:e.unsafeMetadata})}),(0,n.tZ)(g.Route,{path:"choose",children:(0,n.tZ)(W,{})}),(0,n.tZ)(g.Route,{path:"choose-wallet",children:(0,n.tZ)(I,{})}),(0,n.tZ)(g.Route,{path:"verify",children:(0,n.tZ)(a.J,{redirectUrlComplete:e.afterSignInUrl,redirectUrl:"../factor-two"})}),e.isCombinedFlow&&(0,n.BX)(g.Route,{path:"create",children:[(0,n.tZ)(g.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,n.tZ)(b,{})}),(0,n.tZ)(g.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,n.tZ)(_,{})}),(0,n.tZ)(g.Route,{path:"sso-callback",children:(0,n.tZ)(B,{signUpUrl:t.signUpUrl,signInUrl:t.signInUrl,signUpForceRedirectUrl:t.afterSignUpUrl,signInForceRedirectUrl:t.afterSignInUrl,secondFactorUrl:t.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number",unsafeMetadata:t.unsafeMetadata})}),(0,n.tZ)(g.Route,{path:"verify",children:(0,n.tZ)(a.$,{redirectUrlComplete:t.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue"})}),(0,n.BX)(g.Route,{path:"continue",children:[(0,n.tZ)(g.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,n.tZ)(b,{})}),(0,n.tZ)(g.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,n.tZ)(_,{})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(A,{})})]}),(0,n.tZ)(g.Route,{path:"tasks",children:(0,n.tZ)(C.x7,{redirectUrlComplete:e.afterSignUpUrl})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(Z,{})})]}),(0,n.tZ)(g.Route,{path:"tasks",children:(0,n.tZ)(C.x7,{redirectUrlComplete:e.afterSignInUrl})}),(0,n.tZ)(g.Route,{index:!0,children:(0,n.tZ)(e2,{})}),(0,n.tZ)(g.Route,{children:(0,n.tZ)(e3,{})})]})})}e4.displayName="SignIn";let e7=(0,m.withCoreSessionSwitchGuard)(function(){let e=(0,m.useSignInContext)(),t={componentName:"SignUp",emailLinkRedirectUrl:e.emailLinkRedirectUrl,ssoCallbackUrl:e.ssoCallbackUrl,forceRedirectUrl:e.signUpForceRedirectUrl,fallbackRedirectUrl:e.signUpFallbackRedirectUrl,signInUrl:e.signInUrl,unsafeMetadata:e.unsafeMetadata,...(0,y.L)({routing:e?.routing,path:e?.path})};return((e=!1)=>(0,S.ib)(e?w:void 0,"preloadComponent",{staleTime:1/0}))(e.isCombinedFlow),(0,v.z)(),(0,n.tZ)(m.SignUpContext.Provider,{value:t,children:(0,n.tZ)(e4,{})})}),e5=e=>{let t={signUpUrl:`/${g.VIRTUAL_ROUTER_BASE_PATH}/sign-up`,waitlistUrl:`/${g.VIRTUAL_ROUTER_BASE_PATH}/waitlist`,...e};return(0,n.tZ)(g.Route,{path:"sign-in",children:(0,n.tZ)(m.SignInContext.Provider,{value:{componentName:"SignIn",...t,routing:"virtual",mode:"modal"},children:(0,n.tZ)("div",{children:(0,n.tZ)(e7,{...t,routing:"virtual"})})})})}},95518:function(e,t,r){r.d(t,{Vh:()=>m,Vs:()=>f,bx:()=>p,mQ:()=>I,s2:()=>g,t3:()=>c,xT:()=>u}),r(72642);var n=r(20645),o=r(98690),i=r(7772),a=r(90577);let s=e=>t=>"safeIdentifier"in t&&t.safeIdentifier===e;function l(e){if((0,n.iW)()){let t=e.find(({strategy:e})=>"passkey"===e);if(t)return t}return null}function c(e,t,r){return e&&0!==e.length?r===i.kJ.Password?function(e,t){let r=l(e);if(r)return r;let n=e.sort(a.sZ)[0];return"password"===n.strategy?n:e.find(s(t))||n||null}(e,t):function(e,t){let r=l(e);if(r)return r;let n=e.sort(a.b8),o=n.find(s(t));if(o)return o;let i=n[0];return"email_link"===i.strategy?i:e.find(s(t))||i||null}(e,t):null}let d=["passkey","email_code","password","phone_code","email_link"];function u(e){return!!e&&d.includes(e.strategy)}function p(e){if(!e||0===e.length)return null;let t=e.find(e=>"totp"===e.strategy);if(t)return t;let r=e.find(e=>"phone_code"===e.strategy);return r||e[0]}let h=["reset_password_phone_code","reset_password_email_code"],m=e=>!!e&&h.includes(e);function g(e){let t;return"tel"===e.type?"phoneNumber":(t=e.value,/^\S+@\S+\.\S+$/.test(t))?"emailAddress":"username"}let f=(e,t,r)=>{if(!t)return null;let n=e.find(e=>"strategy"===e.id)?.value;if(n&&"phone_code"!==n)return null;let i=e.find(e=>e.id===r)?.value;if(!i||!i?.startsWith("+"))return null;let a=(0,o.jR)(i,t);return"sms"===a?null:a},I=(e,t,r)=>{if(!e||!t||"phoneNumber"!==t||!r||!r?.startsWith("+"))return null;let n=(0,o.jR)(r,e);return"sms"===n?null:n}},49327:function(e,t,r){r.d(t,{fB:()=>p,gW:()=>m,uj:()=>h});var n=r(73312),o=r(42305),i=r(48774),a=r(97295),s=r(24676),l=r(31673),c=r(11576),d=r(64204),u=r(34174);let p=e=>{let{navigate:t}=(0,s.useRouter)(),{handleManageAccountClicked:r,handleSignOutSessionClicked:i,handleUserProfileActionClicked:a,session:u}=e,{menutItems:p}=(0,c.useUserButtonContext)(),h=e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100,padding:`${e.space.$4} ${e.space.$5}`}),m=async n=>n?.path?(await t(n.path),e?.completedCallback()):n.id===l.Zb.MANAGE_ACCOUNT?await r():n?.open?a(n.open):(n.onClick?.(),e?.completedCallback());return(0,n.tZ)(o.eX,{role:"menu",elementDescriptor:d.descriptors.userButtonPopoverActions,elementId:d.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100}),children:p?.map(e=>{let t;return t=Object.values(l.Zb).includes(e.id)?{elementDescriptor:d.descriptors.userButtonPopoverActionButton,elementId:d.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:d.descriptors.userButtonPopoverCustomItemButton,elementId:d.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:d.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:d.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},(0,n.tZ)(o.aU,{...t,icon:e.icon,label:e.name,onClick:e.id===l.Zb.SIGN_OUT?i(u):()=>m(e),sx:h,iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4})},e.id)})})},h=e=>{let{navigate:t}=(0,s.useRouter)(),{handleManageAccountClicked:r,handleSignOutSessionClicked:p,handleSessionClicked:h,handleAddAccountClicked:m,handleUserProfileActionClicked:g,session:f,otherSessions:I}=e,{menutItems:S}=(0,c.useUserButtonContext)(),v=async n=>n?.path?(await t(n.path),e?.completedCallback()):n.id===l.Zb.MANAGE_ACCOUNT?await r():n?.open?g(n.open):(n.onClick?.(),e?.completedCallback()),C=S.every(e=>Object.values(l.Zb).includes(e.id));return(0,n.BX)(n.HY,{children:[C?(0,n.tZ)(o.r5,{role:"menu",elementDescriptor:d.descriptors.userButtonPopoverActions,elementId:d.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,n.BX)(d.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:`0 ${e.space.$5} ${e.space.$4}`,gap:e.space.$2}),children:[(0,n.tZ)(o.U8,{elementDescriptor:d.descriptors.userButtonPopoverActionButton,elementId:d.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:u.tc,label:(0,d.localizationKeys)("userButton.action__manageAccount"),onClick:r,focusRing:!0}),(0,n.tZ)(o.U8,{elementDescriptor:d.descriptors.userButtonPopoverActionButton,elementId:d.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:u.lv,label:(0,d.localizationKeys)("userButton.action__signOut"),onClick:p(f),focusRing:!0})]})}):(0,n.tZ)(o.r5,{role:"menu",elementDescriptor:d.descriptors.userButtonPopoverActions,elementId:d.descriptors.userButtonPopoverActions.setId("multiSession"),sx:e=>({gap:e.space.$1,paddingBottom:e.space.$2}),children:S?.map(e=>{let t;return t=Object.values(l.Zb).includes(e.id)?{elementDescriptor:d.descriptors.userButtonPopoverActionButton,elementId:d.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:d.descriptors.userButtonPopoverCustomItemButton,elementId:d.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:d.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:d.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},(0,n.tZ)(o.aU,{...t,icon:e.icon,label:e.name,onClick:e.id===l.Zb.SIGN_OUT?p(f):()=>v(e),sx:e=>({border:0,padding:`${e.space.$2} ${e.space.$5}`,gap:e.space.$3x5}),iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),iconBoxSx:e=>({minHeight:e.sizes.$4,minWidth:e.sizes.$4,alignItems:"center"})},e.id)})}),(0,n.BX)(o.eX,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$borderAlpha100}),children:[I.map(e=>(0,n.tZ)(i.K,{icon:u.nR,onClick:h(e),role:"menuitem",children:(0,n.tZ)(a.E,{user:e.user})},e.id)),(0,n.tZ)(o.aU,{elementDescriptor:d.descriptors.userButtonPopoverActionButton,elementId:d.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:d.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:d.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:u.mm,label:(0,d.localizationKeys)("userButton.action__addAccount"),onClick:m,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},m=e=>{let{handleSignOutAllClicked:t,elementDescriptor:r,elementId:i,iconBoxElementDescriptor:a,iconBoxElementId:s,iconElementDescriptor:l,iconElementId:c,label:p,sx:h,actionSx:m}=e;return(0,n.tZ)(o.eX,{role:"menu",sx:[e=>({padding:e.space.$2}),h],children:(0,n.tZ)(o.aU,{elementDescriptor:r||d.descriptors.userButtonPopoverActionButton,elementId:i||d.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:a||d.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s||d.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:l||d.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c||d.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:u.lv,label:p||(0,d.localizationKeys)("userButton.action__signOutAll"),onClick:t,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:`${e.space.$2} ${e.space.$3}`,borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},35241:function(e,t,r){r.d(t,{Z:()=>u});var n=r(61869),o=r(76663),i=r(11576),a=r(2672),s=r(57046),l=r(55809),c=r(54264),d=r(24676);let u=e=>{let{setActive:t,signOut:r,openUserProfile:u}=(0,n.cL)(),p=(0,a.useCardState)(),{signedInSessions:h,otherSessions:m}=(0,c.j)({user:e.user}),{navigate:g}=(0,d.useRouter)(),{displayConfig:f}=(0,i.useEnvironment)();return{handleSignOutSessionClicked:t=>()=>0===m.length?r(e.navigateAfterSignOut):r(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally(()=>p.setIdle()),handleManageAccountClicked:()=>"navigation"===e.userProfileMode?g(e.userProfileUrl||"").finally(()=>{(async()=>{await (0,s._)(300),e.actionCompleteCallback?.()})()}):(u(e.userProfileProps),e.actionCompleteCallback?.()),handleUserProfileActionClicked:t=>"navigation"===e.userProfileMode?g(e.userProfileUrl||"").finally(()=>{(async()=>{await (0,s._)(300),e.actionCompleteCallback?.()})()}):(u({...e.userProfileProps,...t&&{__experimental_startPath:t}}),e.actionCompleteCallback?.()),handleSignOutAllClicked:()=>r(e.navigateAfterSignOut),handleSessionClicked:r=>async()=>(p.setLoading(),t({session:r,navigate:async({session:t})=>!t.currentTask&&e.afterSwitchSessionUrl?void await g(e.afterSwitchSessionUrl):e.taskUrl?void await g(e.taskUrl):void await (0,o.W8)(t,{baseUrl:e.signInUrl??f.signInUrl,navigate:g})}).finally(()=>{p.setIdle(),e.actionCompleteCallback?.()})),handleAddAccountClicked:()=>((0,l.T7)(e.signInUrl||window.location.href),(0,s._)(2e3)),otherSessions:m,signedInSessions:h}}}}]);