{"version":3,"sources":["../../src/hooks/useSignInWithApple.ts"],"sourcesContent":["import type { SetActive, SignInResource, SignUpResource } from '@clerk/types';\n\nimport { errorThrower } from '../utils/errors';\n\nexport type StartAppleAuthenticationFlowParams = {\n  unsafeMetadata?: SignUpUnsafeMetadata;\n};\n\nexport type StartAppleAuthenticationFlowReturnType = {\n  createdSessionId: string | null;\n  setActive?: SetActive;\n  signIn?: SignInResource;\n  signUp?: SignUpResource;\n};\n\n/**\n * Stub for Apple Authentication hook on non-iOS platforms.\n *\n * Native Apple Authentication using expo-apple-authentication is only available on iOS.\n * For web platforms, use the OAuth-based Apple Sign-In flow instead via useSSO.\n *\n * @example\n * ```tsx\n * import { useSSO } from '@clerk/clerk-expo';\n * import { Button } from 'react-native';\n *\n * function AppleSignInButton() {\n *   const { startSSOFlow } = useSSO();\n *\n *   const onPress = async () => {\n *     try {\n *       const { createdSessionId, setActive } = await startSSOFlow({\n *         strategy: 'oauth_apple'\n *       });\n *\n *       if (createdSessionId && setActive) {\n *         await setActive({ session: createdSessionId });\n *       }\n *     } catch (err) {\n *       console.error('Apple Authentication error:', err);\n *     }\n *   };\n *\n *   return <Button title=\"Sign in with Apple\" onPress={onPress} />;\n * }\n * ```\n *\n * @platform iOS - This hook only works on iOS. On other platforms, it will throw an error.\n *\n * @returns An object containing the `startAppleAuthenticationFlow` function that throws an error\n */\nexport function useSignInWithApple(): {\n  startAppleAuthenticationFlow: (\n    startAppleAuthenticationFlowParams?: StartAppleAuthenticationFlowParams,\n  ) => Promise<StartAppleAuthenticationFlowReturnType>;\n} {\n  function startAppleAuthenticationFlow(\n    _startAppleAuthenticationFlowParams?: StartAppleAuthenticationFlowParams,\n  ): Promise<StartAppleAuthenticationFlowReturnType> {\n    return errorThrower.throw(\n      'Apple Authentication via expo-apple-authentication is only available on iOS. ' +\n        'For web and other platforms, please use the OAuth-based flow with useSSO and strategy: \"oauth_apple\".',\n    );\n  }\n\n  return {\n    startAppleAuthenticationFlow,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,oBAA6B;AAiDtB,SAAS,qBAId;AACA,WAAS,6BACP,qCACiD;AACjD,WAAO,2BAAa;AAAA,MAClB;AAAA,IAEF;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,EACF;AACF;","names":[]}